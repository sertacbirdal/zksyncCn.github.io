<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Accounts: L1-&gt;L2 transactions | zkSync — Accelerating the mass adoption of crypto for personal sovereignty</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script src="/__/firebase/7.13.2/firebase-app.js" defer="true"></script>
    <script src="/__/firebase/7.13.2/firebase-analytics.js" defer="true"></script>
    <script src="/__/firebase/init.js" defer="true"></script>
    <script>
  const logoUrlChanger = setInterval(function() {
    //Anchor above the logo image
    const homeEls = document.getElementsByClassName("home-link");
    if(homeEls.length > 0) {
      const homeEl = homeEls[0];
      homeEl.setAttribute("href", "https://zksync.io");
      homeEl.setAttribute("onclick", "document.location='https://zksync.io';return false;");
      clearInterval(logoUrlChanger);
    }

    //Actual logo image
    const logoEls = document.getElementsByClassName("logo")
    if(logoEls.length > 0) {
      const logoEl = logoEls[0]
      logoEl.setAttribute("onclick", "document.location='https://zksync.io';return false;");
      clearInterval(logoUrlChanger);
    }
  }, 1000)</script>
    <meta name="description" content="zkSync is a ZK rollup that represents the end-game for scaling Ethereum - one that scales its technology and values without degrading security or decentralization">
    
    <link rel="preload" href="/assets/css/0.styles.350a0b01.css" as="style"><link rel="preload" href="/assets/js/app.c6cf46ce.js" as="script"><link rel="preload" href="/assets/js/2.5a73362d.js" as="script"><link rel="preload" href="/assets/js/29.2a268b12.js" as="script"><link rel="prefetch" href="/assets/js/10.1d31b665.js"><link rel="prefetch" href="/assets/js/11.1157f03f.js"><link rel="prefetch" href="/assets/js/12.d33546da.js"><link rel="prefetch" href="/assets/js/13.723b8044.js"><link rel="prefetch" href="/assets/js/14.0c7cfd9a.js"><link rel="prefetch" href="/assets/js/15.94b050a9.js"><link rel="prefetch" href="/assets/js/16.e6a47b37.js"><link rel="prefetch" href="/assets/js/17.b8d9f9d6.js"><link rel="prefetch" href="/assets/js/18.0b30ca48.js"><link rel="prefetch" href="/assets/js/19.766c20d3.js"><link rel="prefetch" href="/assets/js/20.460bc0dc.js"><link rel="prefetch" href="/assets/js/21.fb191a53.js"><link rel="prefetch" href="/assets/js/22.afbb198e.js"><link rel="prefetch" href="/assets/js/23.361781f0.js"><link rel="prefetch" href="/assets/js/24.f13edcf9.js"><link rel="prefetch" href="/assets/js/25.988d1b47.js"><link rel="prefetch" href="/assets/js/26.d9a5b96d.js"><link rel="prefetch" href="/assets/js/27.021584cb.js"><link rel="prefetch" href="/assets/js/28.96f99bb5.js"><link rel="prefetch" href="/assets/js/3.e113e3f2.js"><link rel="prefetch" href="/assets/js/30.7984b785.js"><link rel="prefetch" href="/assets/js/31.8af0f6d4.js"><link rel="prefetch" href="/assets/js/32.69f0eb35.js"><link rel="prefetch" href="/assets/js/33.ce141b46.js"><link rel="prefetch" href="/assets/js/34.436c44f6.js"><link rel="prefetch" href="/assets/js/35.31ad6a43.js"><link rel="prefetch" href="/assets/js/36.2da22722.js"><link rel="prefetch" href="/assets/js/37.1bb4c43e.js"><link rel="prefetch" href="/assets/js/38.56f7eac2.js"><link rel="prefetch" href="/assets/js/39.8eb128c5.js"><link rel="prefetch" href="/assets/js/4.f9a9a52f.js"><link rel="prefetch" href="/assets/js/40.19d448e8.js"><link rel="prefetch" href="/assets/js/41.54fc32f5.js"><link rel="prefetch" href="/assets/js/42.c7a15e4d.js"><link rel="prefetch" href="/assets/js/43.7e116cdb.js"><link rel="prefetch" href="/assets/js/44.15b74555.js"><link rel="prefetch" href="/assets/js/45.e4e94522.js"><link rel="prefetch" href="/assets/js/46.2a43ffcf.js"><link rel="prefetch" href="/assets/js/47.48940a6c.js"><link rel="prefetch" href="/assets/js/48.4522a9da.js"><link rel="prefetch" href="/assets/js/49.2a6881e2.js"><link rel="prefetch" href="/assets/js/5.300f03dd.js"><link rel="prefetch" href="/assets/js/50.7dcd49ad.js"><link rel="prefetch" href="/assets/js/51.1caf73f6.js"><link rel="prefetch" href="/assets/js/52.edaae008.js"><link rel="prefetch" href="/assets/js/53.c8ac7f10.js"><link rel="prefetch" href="/assets/js/54.32be413d.js"><link rel="prefetch" href="/assets/js/55.dfefd250.js"><link rel="prefetch" href="/assets/js/56.71b0a9a6.js"><link rel="prefetch" href="/assets/js/57.fc29b145.js"><link rel="prefetch" href="/assets/js/58.33699426.js"><link rel="prefetch" href="/assets/js/59.f507982b.js"><link rel="prefetch" href="/assets/js/6.89aee1c7.js"><link rel="prefetch" href="/assets/js/60.6fafd85a.js"><link rel="prefetch" href="/assets/js/61.ed3ce206.js"><link rel="prefetch" href="/assets/js/62.92650c1b.js"><link rel="prefetch" href="/assets/js/63.133469b1.js"><link rel="prefetch" href="/assets/js/64.0d71a30f.js"><link rel="prefetch" href="/assets/js/65.80803858.js"><link rel="prefetch" href="/assets/js/66.27a08873.js"><link rel="prefetch" href="/assets/js/67.45bb751b.js"><link rel="prefetch" href="/assets/js/68.c6fed9d6.js"><link rel="prefetch" href="/assets/js/69.937986ed.js"><link rel="prefetch" href="/assets/js/7.9cb55bb9.js"><link rel="prefetch" href="/assets/js/70.25b1f05d.js"><link rel="prefetch" href="/assets/js/71.6812e6cd.js"><link rel="prefetch" href="/assets/js/72.dc598d21.js"><link rel="prefetch" href="/assets/js/73.f7d09f08.js"><link rel="prefetch" href="/assets/js/74.8b4800dc.js"><link rel="prefetch" href="/assets/js/75.25971604.js"><link rel="prefetch" href="/assets/js/76.1dd3556b.js"><link rel="prefetch" href="/assets/js/8.f9eaafb5.js"><link rel="prefetch" href="/assets/js/9.2e9fb4a6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.350a0b01.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/LogotypeLight.svg" alt="zkSync — Accelerating the mass adoption of crypto for personal sovereignty" class="logo"> <span class="site-name can-hide">zkSync — Accelerating the mass adoption of crypto for personal sovereignty</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/dev/" class="nav-link">
  Developer Docs
</a></div><div class="nav-item"><a href="/api/" class="nav-link router-link-active">
  Tools/SDKs
</a></div><div class="nav-item"><a href="/contact.html" class="nav-link">
  Contact
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="v2.0" class="dropdown-title"><span class="title">v2.0</span> <span class="arrow down"></span></button> <button type="button" aria-label="v2.0" class="mobile-dropdown-title"><span class="title">v2.0</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dev/" class="nav-link">
  v2.0
</a></li><li class="dropdown-item"><!----> <a href="https://docs.zksync.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v1.x
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/matter-labs/zksync-web-v2-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/dev/" class="nav-link">
  Developer Docs
</a></div><div class="nav-item"><a href="/api/" class="nav-link router-link-active">
  Tools/SDKs
</a></div><div class="nav-item"><a href="/contact.html" class="nav-link">
  Contact
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="v2.0" class="dropdown-title"><span class="title">v2.0</span> <span class="arrow down"></span></button> <button type="button" aria-label="v2.0" class="mobile-dropdown-title"><span class="title">v2.0</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dev/" class="nav-link">
  v2.0
</a></li><li class="dropdown-item"><!----> <a href="https://docs.zksync.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v1.x
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/matter-labs/zksync-web-v2-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/api/" aria-current="page" class="sidebar-link">Overview</a></li><li><a href="/api/api.html" class="sidebar-link">Web3 API</a></li><li><a href="/api/contracts.html" class="sidebar-link">L1 contract interface</a></li><li><section class="sidebar-group depth-0"><a href="/api/js" class="sidebar-heading clickable router-link-active open"><span>JavaScript SDK</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/js/getting-started.html" class="sidebar-link">Getting started</a></li><li><a href="/api/js/providers.html" class="sidebar-link">Providers</a></li><li><a href="/api/js/accounts.html" class="sidebar-link">Accounts: overview</a></li><li><a href="/api/js/accounts-l1-l2.html" aria-current="page" class="active sidebar-link">Accounts: L1-&gt;L2 transactions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/js/accounts-l1-l2.html#supported-classes" class="sidebar-link">Supported classes</a></li><li class="sidebar-sub-header"><a href="/api/js/accounts-l1-l2.html#approving-deposit-of-tokens" class="sidebar-link">Approving deposit of tokens</a></li><li class="sidebar-sub-header"><a href="/api/js/accounts-l1-l2.html#depositing-tokens-to-zksync" class="sidebar-link">Depositing tokens to zkSync</a></li><li class="sidebar-sub-header"><a href="/api/js/accounts-l1-l2.html#adding-native-token-to-zksync" class="sidebar-link">Adding native token to zkSync</a></li><li class="sidebar-sub-header"><a href="/api/js/accounts-l1-l2.html#finalizing-withdrawals" class="sidebar-link">Finalizing withdrawals</a></li><li class="sidebar-sub-header"><a href="/api/js/accounts-l1-l2.html#force-executing-transactions-on-l2" class="sidebar-link">Force-executing transactions on L2</a></li></ul></li><li><a href="/api/js/contracts.html" class="sidebar-link">Contracts</a></li><li><a href="/api/js/features.html" class="sidebar-link">zkSync features</a></li><li><a href="/api/js/utils.html" class="sidebar-link">Utilities</a></li><li><a href="/api/js/types.html" class="sidebar-link">Types</a></li><li><a href="/api/js/front-end.html" class="sidebar-link">Front-end integration</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/api/python/getting-started" class="sidebar-heading clickable"><span>Python SDK</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/python/getting-started.html" class="sidebar-link">Getting started</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/api/java/getting-started" class="sidebar-heading clickable"><span>Java SDK</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/java/getting-started.html" class="sidebar-link">入门</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/api/go/getting-started" class="sidebar-heading clickable"><span>GO SDK</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/go/getting-started.html" class="sidebar-link">入门</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/api/hardhat" class="sidebar-heading clickable"><span>Hardhat</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/hardhat/getting-started.html" class="sidebar-link">入门</a></li><li><a href="/api/hardhat/plugins.html" class="sidebar-link">插件</a></li><li><a href="/api/hardhat/testing.html" class="sidebar-link">Local testing</a></li><li><a href="/api/hardhat/compiling-libraries.html" class="sidebar-link">不可内联库的编译</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/api/tools/block-explorer" class="sidebar-heading clickable"><span>Block Explorer</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/tools/block-explorer/intro.html" class="sidebar-link">Using the Block Explorer</a></li><li><a href="/api/tools/block-explorer/block-view.html" class="sidebar-link">Browse blocks</a></li><li><a href="/api/tools/block-explorer/contract-verification.html" class="sidebar-link">Contract Verification</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="accounts-l1-l2-transactions"><a href="#accounts-l1-l2-transactions" class="header-anchor">#</a> Accounts: L1-&gt;L2 transactions</h1> <p>This section explores the methods which allow the <a href="/api/js/accounts.html">account</a> classes to send transactions from L1 to L2.</p> <p>If you want to get some background on how L1-&gt;L2 interaction works on zkSync, go through the <a href="/dev/developer-guides/bridging/l1-l2-interop.html">introduction</a> and the <a href="/dev/developer-guides/bridging/l1-l2.html">guide</a>.</p> <h2 id="supported-classes"><a href="#supported-classes" class="header-anchor">#</a> Supported classes</h2> <p>The following account classes support sending transactions from L1 to L2:</p> <ul><li><code>Wallet</code> (if connected to an L1 provider)</li> <li><code>L1Signer</code></li></ul> <h2 id="approving-deposit-of-tokens"><a href="#approving-deposit-of-tokens" class="header-anchor">#</a> Approving deposit of tokens</h2> <p>Bridging ERC20 tokens from Ethereum requires approving the tokens to the zkSync Ethereum smart contract.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">async</span> <span class="token function">approveERC20</span><span class="token punctuation">(</span>
    token<span class="token operator">:</span> Address<span class="token punctuation">,</span>
    amount<span class="token operator">:</span> BigNumberish<span class="token punctuation">,</span>
    overrides<span class="token operator">?</span><span class="token operator">:</span> ethers<span class="token punctuation">.</span>Overrides <span class="token operator">&amp;</span> <span class="token punctuation">{</span> bridgeAddress<span class="token operator">?</span><span class="token operator">:</span> Address <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ethers<span class="token punctuation">.</span>providers<span class="token punctuation">.</span>TransactionResponse<span class="token operator">&gt;</span>
</code></pre></div><h3 id="inputs-and-outputs"><a href="#inputs-and-outputs" class="header-anchor">#</a> Inputs and outputs</h3> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td>token</td> <td>The Ethereum address of the token.</td></tr> <tr><td>amount</td> <td>The amount of the token to be approved.</td></tr> <tr><td>overrides (optional)</td> <td>Ethereum transaction overrides. May be used to pass <code>gasLimit</code>, <code>gasPrice</code>, etc. You can also provide a custom address of the L1 bridge to use (the bridge provided by the Matter Labs team is used by default).</td></tr> <tr><td>returns</td> <td><code>ethers.providers.TransactionResponse</code> object.</td></tr></tbody></table> <blockquote><p>Example</p></blockquote> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> zksync <span class="token keyword">from</span> <span class="token string">&quot;zksync-web3&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ethers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;ethers&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">PRIVATE_KEY</span> <span class="token operator">=</span> <span class="token string">&quot;0xc8acb475bb76a4b8ee36ea4d0e516a755a17fad2e84427d5559b37b544d9ba5a&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> zkSyncProvider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">zksync</span><span class="token punctuation">.</span><span class="token function">Provider</span><span class="token punctuation">(</span><span class="token string">&quot;https://zksync2-testnet.zksync.dev/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ethereumProvider <span class="token operator">=</span> ethers<span class="token punctuation">.</span><span class="token function">getDefaultProvider</span><span class="token punctuation">(</span><span class="token string">&quot;goerli&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> wallet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">zksync</span><span class="token punctuation">.</span><span class="token function">Wallet</span><span class="token punctuation">(</span><span class="token constant">PRIVATE_KEY</span><span class="token punctuation">,</span> zkSyncProvider<span class="token punctuation">,</span> ethereumProvider<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">USDC_ADDRESS</span> <span class="token operator">=</span> <span class="token string">&quot;0xd35cceead182dcee0f148ebac9447da2c4d449c4&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> txHandle <span class="token operator">=</span> <span class="token keyword">await</span> wallet<span class="token punctuation">.</span><span class="token function">approveERC20</span><span class="token punctuation">(</span>
  <span class="token constant">USDC_ADDRESS</span><span class="token punctuation">,</span>
  <span class="token string">&quot;10000000&quot;</span> <span class="token comment">// 10.0 USDC</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">await</span> txHandle<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="depositing-tokens-to-zksync"><a href="#depositing-tokens-to-zksync" class="header-anchor">#</a> Depositing tokens to zkSync</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">async</span> <span class="token function">deposit</span><span class="token punctuation">(</span>transaction<span class="token operator">:</span> <span class="token punctuation">{</span>
  token<span class="token operator">:</span> Address<span class="token punctuation">;</span>
  amount<span class="token operator">:</span> BigNumberish<span class="token punctuation">;</span>
  to<span class="token operator">?</span><span class="token operator">:</span> Address<span class="token punctuation">;</span>
  operatorTip<span class="token operator">?</span><span class="token operator">:</span> BigNumberish<span class="token punctuation">;</span>
  bridgeAddress<span class="token operator">?</span><span class="token operator">:</span> Address<span class="token punctuation">;</span>
  approveERC20<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  overrides<span class="token operator">?</span><span class="token operator">:</span> ethers<span class="token punctuation">.</span>PayableOverrides<span class="token punctuation">;</span>
  approveOverrides<span class="token operator">?</span><span class="token operator">:</span> ethers<span class="token punctuation">.</span>Overrides<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>PriorityOpResponse<span class="token operator">&gt;</span>
</code></pre></div><h4 id="inputs-and-outputs-2"><a href="#inputs-and-outputs-2" class="header-anchor">#</a> Inputs and outputs</h4> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td>transaction.token</td> <td>The address of the token to deposit.</td></tr> <tr><td>transaction.amount</td> <td>The amount of the token to be deposited.</td></tr> <tr><td>transaction.to (optional)</td> <td>The address that will receive the deposited tokens on L2.</td></tr> <tr><td>transaction.operatorTip (optional)</td> <td>If the ETH <code>value</code> passed with the transaction is not explicitly stated in the overrides, this field will be equal to the tip the operator will receive on top of the base cost of the transaction. This value has no meaning for the <code>Deque</code> type of queue, but it will be used to prioritize the transactions that get into the <code>Heap</code> or <code>HeapBuffer</code> queues.</td></tr> <tr><td>transaction.bridgeAddress (optional)</td> <td>The address of the bridge contract to be used. Defaults to the default zkSync bridge (either <code>L1EthBridge</code> or <code>L1Erc20Bridge</code>).</td></tr> <tr><td>transaction.approveERC20 (optional)</td> <td>Whether or not should the token approval be performed under the hood. Set this flag to <code>true</code> if you bridge an ERC20 token and didn't call the <code>approveERC20</code> function beforehand.</td></tr> <tr><td>transaction.overrides (optional)</td> <td>Ethereum transaction overrides. May be used to pass <code>gasLimit</code>, <code>gasPrice</code>, etc.</td></tr> <tr><td>transaction.approveOverrides (optional)</td> <td>Ethereum transaction overrides of the approval transaction. May be used to pass <code>gasLimit</code>, <code>gasPrice</code>, etc.</td></tr> <tr><td>returns</td> <td><code>PriorityOpResponse</code> object.</td></tr></tbody></table> <blockquote><p>Example</p></blockquote> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> zksync <span class="token keyword">from</span> <span class="token string">&quot;zksync-web3&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ethers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;ethers&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">PRIVATE_KEY</span> <span class="token operator">=</span> <span class="token string">&quot;0xc8acb475bb76a4b8ee36ea4d0e516a755a17fad2e84427d5559b37b544d9ba5a&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> zkSyncProvider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">zksync</span><span class="token punctuation">.</span><span class="token function">Provider</span><span class="token punctuation">(</span><span class="token string">&quot;https://zksync2-testnet.zksync.dev/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ethereumProvider <span class="token operator">=</span> ethers<span class="token punctuation">.</span><span class="token function">getDefaultProvider</span><span class="token punctuation">(</span><span class="token string">&quot;goerli&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> wallet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">zksync</span><span class="token punctuation">.</span><span class="token function">Wallet</span><span class="token punctuation">(</span><span class="token constant">PRIVATE_KEY</span><span class="token punctuation">,</span> zkSyncProvider<span class="token punctuation">,</span> ethereumProvider<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">USDC_ADDRESS</span> <span class="token operator">=</span> <span class="token string">&quot;0xd35cceead182dcee0f148ebac9447da2c4d449c4&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> usdcDepositHandle <span class="token operator">=</span> <span class="token keyword">await</span> wallet<span class="token punctuation">.</span><span class="token function">deposit</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  token<span class="token operator">:</span> <span class="token constant">USDC_ADDRESS</span><span class="token punctuation">,</span>
  amount<span class="token operator">:</span> <span class="token string">&quot;10000000&quot;</span><span class="token punctuation">,</span>
  approveERC20<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Note that we wait not only for the L1 transaction to complete but also for it to be</span>
<span class="token comment">// processed by zkSync. If we want to wait only for the transaction to be processed on L1,</span>
<span class="token comment">// we can use `await usdcDepositHandle.waitL1Commit()`</span>
<span class="token keyword">await</span> usdcDepositHandle<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> ethDepositHandle <span class="token operator">=</span> <span class="token keyword">await</span> wallet<span class="token punctuation">.</span><span class="token function">deposit</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  token<span class="token operator">:</span> zksync<span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token constant">ETH_ADDRESS</span><span class="token punctuation">,</span>
  amount<span class="token operator">:</span> <span class="token string">&quot;10000000&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Note that we wait not only for the L1 transaction to complete but also for it to be</span>
<span class="token comment">// processed by zkSync. If we want to wait only for the transaction to be processed on L1,</span>
<span class="token comment">// we can use `await ethDepositHandle.waitL1Commit()`</span>
<span class="token keyword">await</span> ethDepositHandle<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="adding-native-token-to-zksync"><a href="#adding-native-token-to-zksync" class="header-anchor">#</a> Adding native token to zkSync</h2> <p>New tokens are added automatically the first time they are deposited.</p> <h2 id="finalizing-withdrawals"><a href="#finalizing-withdrawals" class="header-anchor">#</a> Finalizing withdrawals</h2> <p>Withdrawals are executed in 2 steps - initiated on L2 and finalized on L1.</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">async</span> <span class="token function">finalizeWithdrawal</span><span class="token punctuation">(</span>withdrawalHash<span class="token operator">:</span> BytesLike<span class="token punctuation">,</span> index<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ethers<span class="token punctuation">.</span>TransactionResponse<span class="token operator">&gt;</span>
</code></pre></div><h4 id="inputs-and-outputs-3"><a href="#inputs-and-outputs-3" class="header-anchor">#</a> Inputs and outputs</h4> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td>withdrawalHash</td> <td>Hash of the L2 transaction where the withdrawal was initiated.</td></tr> <tr><td>index (optional)</td> <td>In case there where multiple withdrawals in one transaction, you may pass an index of the withdrawal you want to finalize (defaults to 0)</td></tr></tbody></table> <h2 id="force-executing-transactions-on-l2"><a href="#force-executing-transactions-on-l2" class="header-anchor">#</a> Force-executing transactions on L2</h2> <h3 id="getting-the-base-cost-for-a-transaction"><a href="#getting-the-base-cost-for-a-transaction" class="header-anchor">#</a> Getting the base cost for a transaction</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">async</span> <span class="token function">getBaseCost</span><span class="token punctuation">(</span>params<span class="token operator">:</span> <span class="token punctuation">{</span>
    ergsLimit<span class="token operator">:</span> BigNumberish<span class="token punctuation">;</span>
    calldataLength<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    gasPrice<span class="token operator">?</span><span class="token operator">:</span> BigNumberish<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>BigNumber<span class="token operator">&gt;</span>
</code></pre></div><h4 id="inputs-and-outputs-4"><a href="#inputs-and-outputs-4" class="header-anchor">#</a> Inputs and outputs</h4> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td>params.ergsLimit</td> <td>The <code>ergsLimit</code> for the call.</td></tr> <tr><td>params.calldataLength</td> <td>The length of the calldata in bytes.</td></tr> <tr><td>params.gasPrice (optional)</td> <td>The gas price of the L1 transaction that will send the request for an execute call.</td></tr> <tr><td>returns</td> <td>The base cost in ETH for requesting the contract call.</td></tr></tbody></table> <h3 id="requesting-transaction-execution"><a href="#requesting-transaction-execution" class="header-anchor">#</a> Requesting transaction execution</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">async</span> <span class="token function">requestExecute</span><span class="token punctuation">(</span>transaction<span class="token operator">:</span> <span class="token punctuation">{</span>
    contractAddress<span class="token operator">:</span> Address<span class="token punctuation">;</span>
    calldata<span class="token operator">:</span> BytesLike<span class="token punctuation">;</span>
    ergsLimit<span class="token operator">:</span> BigNumberish<span class="token punctuation">;</span>
    factoryDeps<span class="token operator">?</span><span class="token operator">:</span> ethers<span class="token punctuation">.</span>BytesLike<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    operatorTip<span class="token operator">?</span><span class="token operator">:</span> BigNumberish<span class="token punctuation">;</span>
    overrides<span class="token operator">?</span><span class="token operator">:</span> ethers<span class="token punctuation">.</span>CallOverrides<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>PriorityOpResponse<span class="token operator">&gt;</span>
</code></pre></div><h4 id="inputs-and-outputs-5"><a href="#inputs-and-outputs-5" class="header-anchor">#</a> Inputs and outputs</h4> <table><thead><tr><th>Name</th> <th>Description</th></tr></thead> <tbody><tr><td>transaction.contractAddress</td> <td>The address of the L2 contract to call.</td></tr> <tr><td>transaction.calldata</td> <td>The calldata of the call transaction. It can be encoded the same way as in Ethereum.</td></tr> <tr><td>transaction.ergsLimit</td> <td>The <code>ergsLimit</code> for the call.</td></tr> <tr><td>transaction.factoryDeps</td> <td>Array of bytecodes of factory dependencies - only used for transactions that deploy contracts.</td></tr> <tr><td>transaction.operatorTip (optional)</td> <td>If the ETH <code>value</code> passed with the transaction is not explicitly stated in the overrides, this field will be equal to the tip the operator will receive on top of the base cost of the transaction. This value has no meaning for the <code>Deque</code> type of queue, but it will be used to prioritize the transactions that get into the <code>Heap</code> or <code>HeapBuffer</code> queues.</td></tr> <tr><td>overrides (optional)</td> <td>Ethereum transaction overrides. May be used to pass <code>gasLimit</code>, <code>gasPrice</code> etc.</td></tr> <tr><td>returns</td> <td><code>PriorityOpResponse</code> object.</td></tr></tbody></table> <blockquote><p>Example</p></blockquote> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> zksync <span class="token keyword">from</span> <span class="token string">&quot;zksync-web3&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BigNumber<span class="token punctuation">,</span> ethers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;ethers&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">PRIVATE_KEY</span> <span class="token operator">=</span> <span class="token string">&quot;0xc8acb475bb76a4b8ee36ea4d0e516a755a17fad2e84427d5559b37b544d9ba5a&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> zkSyncProvider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">zksync</span><span class="token punctuation">.</span><span class="token function">Provider</span><span class="token punctuation">(</span><span class="token string">&quot;https://zksync2-testnet.zksync.dev/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ethereumProvider <span class="token operator">=</span> ethers<span class="token punctuation">.</span><span class="token function">getDefaultProvider</span><span class="token punctuation">(</span><span class="token string">&quot;goerli&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> wallet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">zksync</span><span class="token punctuation">.</span><span class="token function">Wallet</span><span class="token punctuation">(</span><span class="token constant">PRIVATE_KEY</span><span class="token punctuation">,</span> zkSyncProvider<span class="token punctuation">,</span> ethereumProvider<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> gasPrice <span class="token operator">=</span> <span class="token keyword">await</span> wallet<span class="token punctuation">.</span>providerL1<span class="token operator">!</span><span class="token punctuation">.</span><span class="token function">getGasPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// The calldata can be encoded the same way as for Ethereum.</span>
<span class="token comment">// Here is an example on how to get the calldata from an ABI:</span>
<span class="token keyword">const</span> abi <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    inputs<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">&quot;increment&quot;</span><span class="token punctuation">,</span>
    outputs<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    stateMutability<span class="token operator">:</span> <span class="token string">&quot;nonpayable&quot;</span><span class="token punctuation">,</span>
    type<span class="token operator">:</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> contractInterface <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ethers</span><span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">Interface</span><span class="token punctuation">(</span>abi<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> calldata <span class="token operator">=</span> contractInterface<span class="token punctuation">.</span><span class="token function">encodeFunctionData</span><span class="token punctuation">(</span><span class="token string">&quot;increment&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ergsLimit <span class="token operator">=</span> BigNumber<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> txCostPrice <span class="token operator">=</span> <span class="token keyword">await</span> wallet<span class="token punctuation">.</span><span class="token function">getBaseCost</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  gasPrice<span class="token punctuation">,</span>
  calldataLength<span class="token operator">:</span> ethers<span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">arrayify</span><span class="token punctuation">(</span>calldata<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span>
  ergsLimit<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Executing the transaction will cost </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ethers<span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">formatEther</span><span class="token punctuation">(</span>txCostPrice<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> ETH</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> executeTx <span class="token operator">=</span> <span class="token keyword">await</span> wallet<span class="token punctuation">.</span><span class="token function">requestExecute</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  calldata<span class="token punctuation">,</span>
  ergsLimit<span class="token punctuation">,</span>
  contractAddress<span class="token operator">:</span> <span class="token string">&quot;0x19a5bfcbe15f98aa073b9f81b58466521479df8d&quot;</span><span class="token punctuation">,</span>
  overrides<span class="token operator">:</span> <span class="token punctuation">{</span>
    gasPrice<span class="token punctuation">,</span>
    value<span class="token operator">:</span> txCostPrice<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">await</span> executeTx<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/matter-labs/zksync-web-v2-docs/edit/main/docs/api/js/accounts-l1-l2.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/28/2022, 5:37:06 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/api/js/accounts.html" class="prev">
        Accounts: overview
      </a></span> <span class="next"><a href="/api/js/contracts.html">
        Contracts
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.c6cf46ce.js" defer></script><script src="/assets/js/2.5a73362d.js" defer></script><script src="/assets/js/29.2a268b12.js" defer></script>
  </body>
</html>
