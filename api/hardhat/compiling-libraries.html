<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>不可内联库的编译 | zkSync — Accelerating the mass adoption of crypto for personal sovereignty</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script src="/__/firebase/7.13.2/firebase-app.js" defer="true"></script>
    <script src="/__/firebase/7.13.2/firebase-analytics.js" defer="true"></script>
    <script src="/__/firebase/init.js" defer="true"></script>
    <script>
  const logoUrlChanger = setInterval(function() {
    //Anchor above the logo image
    const homeEls = document.getElementsByClassName("home-link");
    if(homeEls.length > 0) {
      const homeEl = homeEls[0];
      homeEl.setAttribute("href", "https://zksync.io");
      homeEl.setAttribute("onclick", "document.location='https://zksync.io';return false;");
      clearInterval(logoUrlChanger);
    }

    //Actual logo image
    const logoEls = document.getElementsByClassName("logo")
    if(logoEls.length > 0) {
      const logoEl = logoEls[0]
      logoEl.setAttribute("onclick", "document.location='https://zksync.io';return false;");
      clearInterval(logoUrlChanger);
    }
  }, 1000)</script>
    <meta name="description" content="zkSync is a ZK rollup that represents the end-game for scaling Ethereum - one that scales its technology and values without degrading security or decentralization">
    
    <link rel="preload" href="/assets/css/0.styles.350a0b01.css" as="style"><link rel="preload" href="/assets/js/app.c6cf46ce.js" as="script"><link rel="preload" href="/assets/js/2.5a73362d.js" as="script"><link rel="preload" href="/assets/js/22.afbb198e.js" as="script"><link rel="prefetch" href="/assets/js/10.1d31b665.js"><link rel="prefetch" href="/assets/js/11.1157f03f.js"><link rel="prefetch" href="/assets/js/12.d33546da.js"><link rel="prefetch" href="/assets/js/13.723b8044.js"><link rel="prefetch" href="/assets/js/14.0c7cfd9a.js"><link rel="prefetch" href="/assets/js/15.94b050a9.js"><link rel="prefetch" href="/assets/js/16.e6a47b37.js"><link rel="prefetch" href="/assets/js/17.b8d9f9d6.js"><link rel="prefetch" href="/assets/js/18.0b30ca48.js"><link rel="prefetch" href="/assets/js/19.766c20d3.js"><link rel="prefetch" href="/assets/js/20.460bc0dc.js"><link rel="prefetch" href="/assets/js/21.fb191a53.js"><link rel="prefetch" href="/assets/js/23.361781f0.js"><link rel="prefetch" href="/assets/js/24.f13edcf9.js"><link rel="prefetch" href="/assets/js/25.988d1b47.js"><link rel="prefetch" href="/assets/js/26.d9a5b96d.js"><link rel="prefetch" href="/assets/js/27.021584cb.js"><link rel="prefetch" href="/assets/js/28.96f99bb5.js"><link rel="prefetch" href="/assets/js/29.2a268b12.js"><link rel="prefetch" href="/assets/js/3.e113e3f2.js"><link rel="prefetch" href="/assets/js/30.7984b785.js"><link rel="prefetch" href="/assets/js/31.8af0f6d4.js"><link rel="prefetch" href="/assets/js/32.69f0eb35.js"><link rel="prefetch" href="/assets/js/33.ce141b46.js"><link rel="prefetch" href="/assets/js/34.436c44f6.js"><link rel="prefetch" href="/assets/js/35.31ad6a43.js"><link rel="prefetch" href="/assets/js/36.2da22722.js"><link rel="prefetch" href="/assets/js/37.1bb4c43e.js"><link rel="prefetch" href="/assets/js/38.56f7eac2.js"><link rel="prefetch" href="/assets/js/39.8eb128c5.js"><link rel="prefetch" href="/assets/js/4.f9a9a52f.js"><link rel="prefetch" href="/assets/js/40.19d448e8.js"><link rel="prefetch" href="/assets/js/41.54fc32f5.js"><link rel="prefetch" href="/assets/js/42.c7a15e4d.js"><link rel="prefetch" href="/assets/js/43.7e116cdb.js"><link rel="prefetch" href="/assets/js/44.15b74555.js"><link rel="prefetch" href="/assets/js/45.e4e94522.js"><link rel="prefetch" href="/assets/js/46.2a43ffcf.js"><link rel="prefetch" href="/assets/js/47.48940a6c.js"><link rel="prefetch" href="/assets/js/48.4522a9da.js"><link rel="prefetch" href="/assets/js/49.2a6881e2.js"><link rel="prefetch" href="/assets/js/5.300f03dd.js"><link rel="prefetch" href="/assets/js/50.7dcd49ad.js"><link rel="prefetch" href="/assets/js/51.1caf73f6.js"><link rel="prefetch" href="/assets/js/52.edaae008.js"><link rel="prefetch" href="/assets/js/53.c8ac7f10.js"><link rel="prefetch" href="/assets/js/54.32be413d.js"><link rel="prefetch" href="/assets/js/55.dfefd250.js"><link rel="prefetch" href="/assets/js/56.71b0a9a6.js"><link rel="prefetch" href="/assets/js/57.fc29b145.js"><link rel="prefetch" href="/assets/js/58.33699426.js"><link rel="prefetch" href="/assets/js/59.f507982b.js"><link rel="prefetch" href="/assets/js/6.89aee1c7.js"><link rel="prefetch" href="/assets/js/60.6fafd85a.js"><link rel="prefetch" href="/assets/js/61.ed3ce206.js"><link rel="prefetch" href="/assets/js/62.92650c1b.js"><link rel="prefetch" href="/assets/js/63.133469b1.js"><link rel="prefetch" href="/assets/js/64.0d71a30f.js"><link rel="prefetch" href="/assets/js/65.80803858.js"><link rel="prefetch" href="/assets/js/66.27a08873.js"><link rel="prefetch" href="/assets/js/67.45bb751b.js"><link rel="prefetch" href="/assets/js/68.c6fed9d6.js"><link rel="prefetch" href="/assets/js/69.937986ed.js"><link rel="prefetch" href="/assets/js/7.9cb55bb9.js"><link rel="prefetch" href="/assets/js/70.25b1f05d.js"><link rel="prefetch" href="/assets/js/71.6812e6cd.js"><link rel="prefetch" href="/assets/js/72.dc598d21.js"><link rel="prefetch" href="/assets/js/73.f7d09f08.js"><link rel="prefetch" href="/assets/js/74.8b4800dc.js"><link rel="prefetch" href="/assets/js/75.25971604.js"><link rel="prefetch" href="/assets/js/76.1dd3556b.js"><link rel="prefetch" href="/assets/js/8.f9eaafb5.js"><link rel="prefetch" href="/assets/js/9.2e9fb4a6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.350a0b01.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/LogotypeLight.svg" alt="zkSync — Accelerating the mass adoption of crypto for personal sovereignty" class="logo"> <span class="site-name can-hide">zkSync — Accelerating the mass adoption of crypto for personal sovereignty</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/dev/" class="nav-link">
  Developer Docs
</a></div><div class="nav-item"><a href="/api/" class="nav-link router-link-active">
  Tools/SDKs
</a></div><div class="nav-item"><a href="/contact.html" class="nav-link">
  Contact
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="v2.0" class="dropdown-title"><span class="title">v2.0</span> <span class="arrow down"></span></button> <button type="button" aria-label="v2.0" class="mobile-dropdown-title"><span class="title">v2.0</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dev/" class="nav-link">
  v2.0
</a></li><li class="dropdown-item"><!----> <a href="https://docs.zksync.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v1.x
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/matter-labs/zksync-web-v2-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/dev/" class="nav-link">
  Developer Docs
</a></div><div class="nav-item"><a href="/api/" class="nav-link router-link-active">
  Tools/SDKs
</a></div><div class="nav-item"><a href="/contact.html" class="nav-link">
  Contact
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="v2.0" class="dropdown-title"><span class="title">v2.0</span> <span class="arrow down"></span></button> <button type="button" aria-label="v2.0" class="mobile-dropdown-title"><span class="title">v2.0</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/dev/" class="nav-link">
  v2.0
</a></li><li class="dropdown-item"><!----> <a href="https://docs.zksync.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  v1.x
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/matter-labs/zksync-web-v2-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/api/" aria-current="page" class="sidebar-link">Overview</a></li><li><a href="/api/api.html" class="sidebar-link">Web3 API</a></li><li><a href="/api/contracts.html" class="sidebar-link">L1 contract interface</a></li><li><section class="sidebar-group depth-0"><a href="/api/js" class="sidebar-heading clickable"><span>JavaScript SDK</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/js/getting-started.html" class="sidebar-link">Getting started</a></li><li><a href="/api/js/providers.html" class="sidebar-link">Providers</a></li><li><a href="/api/js/accounts.html" class="sidebar-link">Accounts: overview</a></li><li><a href="/api/js/accounts-l1-l2.html" class="sidebar-link">Accounts: L1-&gt;L2 transactions</a></li><li><a href="/api/js/contracts.html" class="sidebar-link">Contracts</a></li><li><a href="/api/js/features.html" class="sidebar-link">zkSync features</a></li><li><a href="/api/js/utils.html" class="sidebar-link">Utilities</a></li><li><a href="/api/js/types.html" class="sidebar-link">Types</a></li><li><a href="/api/js/front-end.html" class="sidebar-link">Front-end integration</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/api/python/getting-started" class="sidebar-heading clickable"><span>Python SDK</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/python/getting-started.html" class="sidebar-link">Getting started</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/api/java/getting-started" class="sidebar-heading clickable"><span>Java SDK</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/java/getting-started.html" class="sidebar-link">入门</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/api/go/getting-started" class="sidebar-heading clickable"><span>GO SDK</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/go/getting-started.html" class="sidebar-link">入门</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/api/hardhat" class="sidebar-heading clickable router-link-active open"><span>Hardhat</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/hardhat/getting-started.html" class="sidebar-link">入门</a></li><li><a href="/api/hardhat/plugins.html" class="sidebar-link">插件</a></li><li><a href="/api/hardhat/testing.html" class="sidebar-link">Local testing</a></li><li><a href="/api/hardhat/compiling-libraries.html" aria-current="page" class="active sidebar-link">不可内联库的编译</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/api/hardhat/compiling-libraries.html#openzeppelin-公用程序库" class="sidebar-link">OpenZeppelin 公用程序库</a></li><li class="sidebar-sub-header"><a href="/api/hardhat/compiling-libraries.html#示例" class="sidebar-link">示例</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/api/tools/block-explorer" class="sidebar-heading clickable"><span>Block Explorer</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/api/tools/block-explorer/intro.html" class="sidebar-link">Using the Block Explorer</a></li><li><a href="/api/tools/block-explorer/block-view.html" class="sidebar-link">Browse blocks</a></li><li><a href="/api/tools/block-explorer/contract-verification.html" class="sidebar-link">Contract Verification</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="不可内联库的编译"><a href="#不可内联库的编译" class="header-anchor">#</a> 不可内联库的编译</h1> <p>Solidity库可以分为两类：</p> <ul><li><em>Inlinable</em>。那些只包含 <code>private</code> or <code>internal</code> 方法的。 由于它们永远无法从外部调用，因此 Solidity 编译器将它们内联，并且将这些库的代码成为使用它们代码的一部分，即：不使用外部调用来访问库的方法。</li> <li><em>Non-inlinable</em>。 那些至少有一个 <code>公共</code> 或 <code>外部</code> 方法的。 虽然它们可能会被 Solidity 编译器内联，但在编译为 Yul 表示时，它们不会内联。 由于 Yul 是编译为 zkEVM 字节码的中间步骤，这意味着这些库不能被 zkSync 编译器内联。</li></ul> <p><strong>实际上，这意味着需要单独部署具有公共方法的库，并且在编译主合同时将它们的地址作为参数传递。</strong> 使用此库的方法将替换为对其地址的调用。</p> <h2 id="openzeppelin-公用程序库"><a href="#openzeppelin-公用程序库" class="header-anchor">#</a> OpenZeppelin 公用程序库</h2> <p>请注意， 绝大多数OpenZeppelin 的公用程序库都是可内联的。这意味着不需要做任何进一步的的操作来使它们编译。</p> <p>这一节只描述了不可内联的库的编译。</p> <h2 id="示例"><a href="#示例" class="header-anchor">#</a> 示例</h2> <p>假设我们有一个计算数字平方的小库:</p> <div class="language-solidity extra-class"><pre class="language-solidity"><code><span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.8.0</span><span class="token punctuation">;</span>

<span class="token keyword">library</span> <span class="token class-name">MiniMath</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> x<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">pure</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token keyword">return</span> x<span class="token operator">*</span>x<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>而有一个智能合约，使用这个库</p> <div class="language-solidity extra-class"><pre class="language-solidity"><code><span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token operator">^</span><span class="token version number">0.8.0</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token string">&quot;./MiniMath.sol&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">contract</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token builtin">uint256</span> <span class="token keyword">public</span> lastNumber<span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">storeSquare</span><span class="token punctuation">(</span><span class="token builtin">uint256</span> x<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{</span>
        <span class="token builtin">uint256</span> square <span class="token operator">=</span> MiniMath<span class="token punctuation">.</span><span class="token function">square</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
        lastNumber <span class="token operator">=</span> square<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果您尝试按照 <a href="/api/hardhat/getting-started.html">入门</a> 指南中的指南使用这两个文件创建项目，<code>yarn hardhat compile</code> 命令将失败并出现以下错误：</p> <div class="language- extra-class"><pre class="language-text"><code>Error in plugin @matterlabs/hardhat-zksync-solc: LLVM(&quot;Library `contracts/MiniMath.sol:MiniMath` not found&quot;)
</code></pre></div><p>该错误告诉我们，应该提供 <code>MiniMath</code> 库的地址。</p> <p>要解决此问题，您需要创建 <em>一个单独的项目</em> ，其中仅存放库文件。 <em>仅</em> 将库部署到 zkSync 后，您应该获取已部署库的地址并将其传递给编译器设置。 部署库的过程与部署智能合约的过程相同。 您可以在<a href="/api/hardhat/getting-started.html#write-and-deploy-a-contract">入门</a> 指南中了解如何在 zkSync 上部署智能合约。</p> <p>假设已部署库的地址是 <code>0xF9702469Dfb84A9aC171E284F71615bd3D3f1EdC</code>。 要将此地址传递给编译器参数，请打开<code>Main</code> 合约所在项目的<code>harhdat.config.ts</code> 文件，并在<code>zksolc</code> 插件属性中添加<code>libraries</code> 部分：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&quot;@matterlabs/hardhat-zksync-deploy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&quot;@matterlabs/hardhat-zksync-solc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  zksolc<span class="token operator">:</span> <span class="token punctuation">{</span>
    version<span class="token operator">:</span> <span class="token string">&quot;1.2.0&quot;</span><span class="token punctuation">,</span>
    compilerSource<span class="token operator">:</span> <span class="token string">&quot;docker&quot;</span><span class="token punctuation">,</span>
    settings<span class="token operator">:</span> <span class="token punctuation">{</span>
      optimizer<span class="token operator">:</span> <span class="token punctuation">{</span>
        enabled<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      experimental<span class="token operator">:</span> <span class="token punctuation">{</span>
        dockerImage<span class="token operator">:</span> <span class="token string">&quot;matterlabs/zksolc&quot;</span><span class="token punctuation">,</span>
        tag<span class="token operator">:</span> <span class="token string">&quot;v1.2.0&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      libraries<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;contracts/MiniMath.sol&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          MiniMath<span class="token operator">:</span> <span class="token string">&quot;0xF9702469Dfb84A9aC171E284F71615bd3D3f1EdC&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  zkSyncDeploy<span class="token operator">:</span> <span class="token punctuation">{</span>
    zkSyncNetwork<span class="token operator">:</span> <span class="token string">&quot;https://zksync2-testnet.zksync.dev&quot;</span><span class="token punctuation">,</span>
    ethNetwork<span class="token operator">:</span> <span class="token string">&quot;goerli&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Can also be the RPC URL of the network (e.g. `https://goerli.infura.io/v3/&lt;API_KEY&gt;`)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  networks<span class="token operator">:</span> <span class="token punctuation">{</span>
    hardhat<span class="token operator">:</span> <span class="token punctuation">{</span>
      zksync<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  solidity<span class="token operator">:</span> <span class="token punctuation">{</span>
    version<span class="token operator">:</span> <span class="token string">&quot;0.8.16&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>库的地址在以下几行中传递：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>libraries<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string-property property">'contracts/MiniMath.sol'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">'MiniMath'</span><span class="token operator">:</span> <span class="token string">'0xF9702469Dfb84A9aC171E284F71615bd3D3f1EdC'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>其中 <code>contracts/MiniMath.sol</code> 是库的 Solidity 文件的位置，<code>MiniMath</code> 是库的名称。</p> <p>现在，运行 <code>yarn hardhat compile</code> 应该可以成功编译 <code>Main</code> 合约 。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/matter-labs/zksync-web-v2-docs/edit/main/docs/api/hardhat/compiling-libraries.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">11/20/2022, 8:56:30 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/api/hardhat/testing.html" class="prev">
        Local testing
      </a></span> <span class="next"><a href="/api/tools/block-explorer/intro.html">
        Using the Block Explorer
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.c6cf46ce.js" defer></script><script src="/assets/js/2.5a73362d.js" defer></script><script src="/assets/js/22.afbb198e.js" defer></script>
  </body>
</html>
