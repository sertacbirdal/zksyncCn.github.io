import{_ as e,W as o,X as i,Z as n,$ as s,a0 as a,a2 as l,Y as u,D as t}from"./framework-674379d2.js";const k={},r=n("h1",{id:"开始工作",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#开始工作","aria-hidden":"true"},"#"),s(" 开始工作")],-1),d=n("p",null,"在本指南中，我们将演示如何。",-1),m=n("ol",null,[n("li",null,"连接到zkSync网络。"),n("li",null,"将资产从以太坊存入zkSync。"),n("li",null,"转移和提取资金（本地和ERC20代币）。"),n("li",null,"部署一个智能合约。"),n("li",null,"与任何智能合约进行互动。")],-1),v={class:"hint-container warning"},b=n("p",{class:"hint-container-title"},"Note",-1),g=n("h2",{id:"前提条件",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#前提条件","aria-hidden":"true"},"#"),s(" 前提条件")],-1),y={href:"https://docs.oracle.com/en/java/",target:"_blank",rel:"noopener noreferrer"},f=u(`<h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> 安装</h2><p>要安装zkSync Java SDK，只需添加以下依赖项。</p><p>Maven <code>pom.xml</code>。</p><div class="language-gradle line-numbers-mode" data-ext="gradle"><pre class="language-gradle"><code><span class="token operator">&lt;</span><span class="token keyword">project</span><span class="token operator">&gt;</span>
  <span class="token punctuation">...</span>
  <span class="token operator">&lt;</span><span class="token keyword">dependencies</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>dependency<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>groupId<span class="token operator">&gt;</span>io<span class="token punctuation">.</span>zksync<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>artifactId<span class="token operator">&gt;</span>zksync2<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span><span class="token number">0.0</span><span class="token punctuation">.</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">dependencies</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">project</span><span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Gradle <code>build.gradle</code></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>dependencies {
    implementation &quot;io.zksync:zksync2:0.0.1&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="实例化sdk" tabindex="-1"><a class="header-anchor" href="#实例化sdk" aria-hidden="true">#</a> 实例化SDK</h2><p>要开始使用这个SDK，你只需要传入一个提供者的配置。</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>zksync</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpService</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        zksync zksync <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">HttpService</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;http://127.0.0.1:3050&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ethereum-signer" tabindex="-1"><a class="header-anchor" href="#ethereum-signer" aria-hidden="true">#</a> Ethereum signer</h2><div class="hint-container warning"><p class="hint-container-title">Note</p><p>⚠️ 千万不要将私钥提交给文件追踪历史，否则你的账户可能会被泄露。</p></div><p>以太坊签名器对于发送L1和L2交易都是必要的，鉴于L2交易需要以太坊签名作为双因素认证方案的一部分。 以太坊签名器由<code>zksync.crypto.signer</code>的<code>PrivateKeyEthSigner</code>抽象类表示。</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>signer<span class="token punctuation">.</span></span><span class="token class-name">EthSigner</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>signer<span class="token punctuation">.</span></span><span class="token class-name">PrivateKeyEthSigner</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span></span><span class="token class-name">Credentials</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">long</span> chainId <span class="token operator">=</span> <span class="token number">123L</span><span class="token punctuation">;</span><span class="token comment">// Chainid of the zksync network</span>

        <span class="token class-name">Credentials</span> credentials <span class="token operator">=</span> <span class="token class-name">Credentials</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&quot;0x&lt;private_key&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">EthSigner</span> signer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrivateKeyEthSigner</span><span class="token punctuation">(</span>credentials<span class="token punctuation">,</span> chainId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="creating-a-wallet" tabindex="-1"><a class="header-anchor" href="#creating-a-wallet" aria-hidden="true">#</a> Creating a wallet</h2><p>为了控制你在zksync的账户，使用<code>zksync.crypto.signer.EthSigner</code>。它可以用密钥签署交易并将交易发送到zksync网络。</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>signer<span class="token punctuation">.</span></span><span class="token class-name">EthSigner</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>zksync</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">Token</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ZkSync</span> zksync<span class="token punctuation">;</span> <span class="token comment">// Initialize client</span>
        <span class="token class-name">EthSigner</span> signer<span class="token punctuation">;</span> <span class="token comment">// Initialize signer</span>

        <span class="token class-name">ZkSyncWallet</span> wallet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ZkSyncWallet</span><span class="token punctuation">(</span>zksync<span class="token punctuation">,</span> signer<span class="token punctuation">,</span> <span class="token class-name">Token</span><span class="token punctuation">.</span><span class="token constant">ETH</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="transactions" tabindex="-1"><a class="header-anchor" href="#transactions" aria-hidden="true">#</a> Transactions</h2><p>zksync2支持以太坊的<code>Legacy</code>和<code>EIP-1155</code>交易，但部署合约除外。</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>abi<span class="token punctuation">.</span></span><span class="token class-name">TransactionEncoder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>signer<span class="token punctuation">.</span></span><span class="token class-name">EthSigner</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">Eip712Meta</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">Transaction</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>zksync</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">ZkBlockParameterName</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>fee<span class="token punctuation">.</span></span><span class="token class-name">Fee</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>type<span class="token punctuation">.</span></span><span class="token class-name">Transaction712</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">ContractDeployer</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>abi<span class="token punctuation">.</span>datatypes<span class="token punctuation">.</span></span><span class="token class-name">Address</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>response<span class="token punctuation">.</span></span><span class="token class-name">TransactionReceipt</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">Numeric</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>math<span class="token punctuation">.</span></span><span class="token class-name">BigInteger</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span></span><span class="token class-name">SecureRandom</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ZkSync</span> zksync<span class="token punctuation">;</span> <span class="token comment">// Initialize client</span>
        <span class="token class-name">EthSigner</span> signer<span class="token punctuation">;</span> <span class="token comment">// Initialize signer</span>

        <span class="token class-name">String</span> binary <span class="token operator">=</span> <span class="token string">&quot;0x&lt;bytecode_of_the_contract&gt;&quot;</span><span class="token punctuation">;</span>

        <span class="token class-name">BigInteger</span> chainId <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">ethChainId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getChainId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> salt <span class="token operator">=</span> <span class="token class-name">SecureRandom</span><span class="token punctuation">.</span><span class="token function">getSeed</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Here we can precompute contract address before its deploying</span>
        <span class="token class-name">String</span> precomputedAddress <span class="token operator">=</span> <span class="token class-name">ContractDeployer</span><span class="token punctuation">.</span><span class="token function">computeL2Create2Address</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Address</span><span class="token punctuation">(</span>signer<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Numeric</span><span class="token punctuation">.</span><span class="token function">hexStringToByteArray</span><span class="token punctuation">(</span>binary<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> salt<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">BigInteger</span> nonce <span class="token operator">=</span> zksync
                <span class="token punctuation">.</span><span class="token function">ethGetTransactionCount</span><span class="token punctuation">(</span>signer<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ZkBlockParameterName</span><span class="token punctuation">.</span><span class="token constant">COMMITTED</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">getTransactionCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Transaction</span> estimate <span class="token operator">=</span> <span class="token class-name">Transaction</span><span class="token punctuation">.</span><span class="token function">create2ContractTransaction</span><span class="token punctuation">(</span>
                signer<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token class-name">BigInteger</span><span class="token punctuation">.</span><span class="token constant">ZERO</span><span class="token punctuation">,</span>
                <span class="token class-name">BigInteger</span><span class="token punctuation">.</span><span class="token constant">ZERO</span><span class="token punctuation">,</span>
                binary<span class="token punctuation">,</span>
                <span class="token string">&quot;0x&quot;</span><span class="token punctuation">,</span>
                salt
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Fee</span> fee <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">zksEstimateFee</span><span class="token punctuation">(</span>estimate<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Eip712Meta</span> meta <span class="token operator">=</span> estimate<span class="token punctuation">.</span><span class="token function">getEip712Meta</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        meta<span class="token punctuation">.</span><span class="token function">setErgsPerPubdata</span><span class="token punctuation">(</span>fee<span class="token punctuation">.</span><span class="token function">getErgsPerPubdataLimitNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Transaction712</span> transaction <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Transaction712</span><span class="token punctuation">(</span>
                chainId<span class="token punctuation">.</span><span class="token function">longValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                nonce<span class="token punctuation">,</span>
                fee<span class="token punctuation">.</span><span class="token function">getErgsLimitNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                estimate<span class="token punctuation">.</span><span class="token function">getTo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                estimate<span class="token punctuation">.</span><span class="token function">getValueNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                estimate<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                fee<span class="token punctuation">.</span><span class="token function">getMaxPriorityFeePerErgNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                fee<span class="token punctuation">.</span><span class="token function">getErgsPriceLimitNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                signer<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                meta
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> signature <span class="token operator">=</span> signer<span class="token punctuation">.</span><span class="token function">getDomain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenCompose</span><span class="token punctuation">(</span>domain <span class="token operator">-&gt;</span> signer<span class="token punctuation">.</span><span class="token function">signTypedData</span><span class="token punctuation">(</span>domain<span class="token punctuation">,</span> transaction<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> message <span class="token operator">=</span> <span class="token class-name">TransactionEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>transaction<span class="token punctuation">,</span> <span class="token class-name">TransactionEncoder</span><span class="token punctuation">.</span><span class="token function">getSignatureData</span><span class="token punctuation">(</span>signature<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> sentTransactionHash <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">ethSendRawTransaction</span><span class="token punctuation">(</span><span class="token class-name">Numeric</span><span class="token punctuation">.</span><span class="token function">toHexString</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTransactionHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// You can check the transaction status</span>
        <span class="token class-name">TransactionReceipt</span> receipt <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">ethGetTransactionReceipt</span><span class="token punctuation">(</span>sentTransactionHash<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTransactionReceipt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="deploy-a-smart-contract" tabindex="-1"><a class="header-anchor" href="#deploy-a-smart-contract" aria-hidden="true">#</a> Deploy a smart contract</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>abi<span class="token punctuation">.</span></span><span class="token class-name">TransactionEncoder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>signer<span class="token punctuation">.</span></span><span class="token class-name">EthSigner</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">Eip712Meta</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">Transaction</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>zksync</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">ZkBlockParameterName</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>fee<span class="token punctuation">.</span></span><span class="token class-name">Fee</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>type<span class="token punctuation">.</span></span><span class="token class-name">Transaction712</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">ContractDeployer</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>zksyncAddresses</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>wrappers<span class="token punctuation">.</span></span><span class="token class-name">NonceHolder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>abi<span class="token punctuation">.</span>datatypes<span class="token punctuation">.</span></span><span class="token class-name">Address</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>response<span class="token punctuation">.</span></span><span class="token class-name">TransactionReceipt</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>tx<span class="token punctuation">.</span></span><span class="token class-name">ReadonlyTransactionManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>tx<span class="token punctuation">.</span>gas<span class="token punctuation">.</span></span><span class="token class-name">DefaultGasProvider</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">Numeric</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>math<span class="token punctuation">.</span></span><span class="token class-name">BigInteger</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ZkSync</span> zksync<span class="token punctuation">;</span> <span class="token comment">// Initialize client</span>
        <span class="token class-name">EthSigner</span> signer<span class="token punctuation">;</span> <span class="token comment">// Initialize signer</span>

        <span class="token class-name">String</span> binary <span class="token operator">=</span> <span class="token string">&quot;0x&lt;bytecode_of_the_contract&gt;&quot;</span><span class="token punctuation">;</span>

        <span class="token class-name">BigInteger</span> chainId <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">ethChainId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getChainId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">NonceHolder</span> nonceHolder <span class="token operator">=</span> <span class="token class-name">NonceHolder</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>zksyncAddresses<span class="token punctuation">.</span><span class="token constant">NONCE_HOLDER_ADDRESS</span><span class="token punctuation">,</span> zksync<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ReadonlyTransactionManager</span><span class="token punctuation">(</span>zksync<span class="token punctuation">,</span> signer<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">DefaultGasProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">BigInteger</span> deploymentNonce <span class="token operator">=</span> nonceHolder<span class="token punctuation">.</span><span class="token function">getDeploymentNonce</span><span class="token punctuation">(</span>signer<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Here we can precompute contract address before its deploying</span>
        <span class="token class-name">String</span> precomputedAddress <span class="token operator">=</span> <span class="token class-name">ContractDeployer</span><span class="token punctuation">.</span><span class="token function">computeL2CreateAddress</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Address</span><span class="token punctuation">(</span>signer<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> deploymentNonce<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">BigInteger</span> nonce <span class="token operator">=</span> zksync
                <span class="token punctuation">.</span><span class="token function">ethGetTransactionCount</span><span class="token punctuation">(</span>signer<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ZkBlockParameterName</span><span class="token punctuation">.</span><span class="token constant">COMMITTED</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">getTransactionCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Transaction</span> estimate <span class="token operator">=</span> <span class="token class-name">Transaction</span><span class="token punctuation">.</span><span class="token function">createContractTransaction</span><span class="token punctuation">(</span>
                signer<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token class-name">BigInteger</span><span class="token punctuation">.</span><span class="token constant">ZERO</span><span class="token punctuation">,</span>
                <span class="token class-name">BigInteger</span><span class="token punctuation">.</span><span class="token constant">ZERO</span><span class="token punctuation">,</span>
                binary<span class="token punctuation">,</span>
                <span class="token string">&quot;0x&quot;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Fee</span> fee <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">zksEstimateFee</span><span class="token punctuation">(</span>estimate<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Eip712Meta</span> meta <span class="token operator">=</span> estimate<span class="token punctuation">.</span><span class="token function">getEip712Meta</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        meta<span class="token punctuation">.</span><span class="token function">setErgsPerPubdata</span><span class="token punctuation">(</span>fee<span class="token punctuation">.</span><span class="token function">getErgsPerPubdataLimitNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Transaction712</span> transaction <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Transaction712</span><span class="token punctuation">(</span>
                chainId<span class="token punctuation">.</span><span class="token function">longValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                nonce<span class="token punctuation">,</span>
                fee<span class="token punctuation">.</span><span class="token function">getErgsLimitNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                estimate<span class="token punctuation">.</span><span class="token function">getTo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                estimate<span class="token punctuation">.</span><span class="token function">getValueNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                estimate<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                fee<span class="token punctuation">.</span><span class="token function">getMaxPriorityFeePerErgNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                fee<span class="token punctuation">.</span><span class="token function">getErgsPriceLimitNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                signer<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                meta
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> signature <span class="token operator">=</span> signer<span class="token punctuation">.</span><span class="token function">getDomain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenCompose</span><span class="token punctuation">(</span>domain <span class="token operator">-&gt;</span> signer<span class="token punctuation">.</span><span class="token function">signTypedData</span><span class="token punctuation">(</span>domain<span class="token punctuation">,</span> transaction<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> message <span class="token operator">=</span> <span class="token class-name">TransactionEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>transaction<span class="token punctuation">,</span> <span class="token class-name">TransactionEncoder</span><span class="token punctuation">.</span><span class="token function">getSignatureData</span><span class="token punctuation">(</span>signature<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> sentTransactionHash <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">ethSendRawTransaction</span><span class="token punctuation">(</span><span class="token class-name">Numeric</span><span class="token punctuation">.</span><span class="token function">toHexString</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTransactionHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// You can check the transaction status</span>
        <span class="token class-name">TransactionReceipt</span> receipt <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">ethGetTransactionReceipt</span><span class="token punctuation">(</span>sentTransactionHash<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTransactionReceipt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="deploy-contract-via-zksyncwallet" tabindex="-1"><a class="header-anchor" href="#deploy-contract-via-zksyncwallet" aria-hidden="true">#</a> Deploy contract via ZkSyncWallet</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span></span><span class="token class-name">ZkSyncWallet</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>response<span class="token punctuation">.</span></span><span class="token class-name">TransactionReceipt</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">Numeric</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ZkSyncWallet</span> wallet<span class="token punctuation">;</span> <span class="token comment">// Initialize wallet</span>

        <span class="token class-name">TransactionReceipt</span> receipt <span class="token operator">=</span> wallet<span class="token punctuation">.</span><span class="token function">deploy</span><span class="token punctuation">(</span><span class="token class-name">Numeric</span><span class="token punctuation">.</span><span class="token function">hexStringToByteArray</span><span class="token punctuation">(</span><span class="token string">&quot;0x&lt;bytecode_of_the_contract&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="interacting-with-smart-contracts" tabindex="-1"><a class="header-anchor" href="#interacting-with-smart-contracts" aria-hidden="true">#</a> Interacting with smart contracts</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>abi<span class="token punctuation">.</span></span><span class="token class-name">TransactionEncoder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>signer<span class="token punctuation">.</span></span><span class="token class-name">EthSigner</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">Eip712Meta</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">Transaction</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>zksync</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">ZkBlockParameterName</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>fee<span class="token punctuation">.</span></span><span class="token class-name">Fee</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>type<span class="token punctuation">.</span></span><span class="token class-name">Transaction712</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>response<span class="token punctuation">.</span></span><span class="token class-name">TransactionReceipt</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">Numeric</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>math<span class="token punctuation">.</span></span><span class="token class-name">BigInteger</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ZkSync</span> zksync<span class="token punctuation">;</span> <span class="token comment">// Initialize client</span>
        <span class="token class-name">EthSigner</span> signer<span class="token punctuation">;</span> <span class="token comment">// Initialize signer</span>

        <span class="token class-name">BigInteger</span> chainId <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">ethChainId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getChainId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">BigInteger</span> nonce <span class="token operator">=</span> zksync
                <span class="token punctuation">.</span><span class="token function">ethGetTransactionCount</span><span class="token punctuation">(</span>signer<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ZkBlockParameterName</span><span class="token punctuation">.</span><span class="token constant">COMMITTED</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">getTransactionCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> contractAddress <span class="token operator">=</span> <span class="token string">&quot;0x&lt;contract_address&gt;&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> calldata <span class="token operator">=</span> <span class="token string">&quot;0x&lt;calldata&gt;&quot;</span><span class="token punctuation">;</span> <span class="token comment">// Here is an encoded contract function</span>

        <span class="token class-name">Transaction</span> estimate <span class="token operator">=</span> <span class="token class-name">Transaction</span><span class="token punctuation">.</span><span class="token function">createFunctionCallTransaction</span><span class="token punctuation">(</span>
                signer<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                contractAddress<span class="token punctuation">,</span>
                <span class="token class-name">BigInteger</span><span class="token punctuation">.</span><span class="token constant">ZERO</span><span class="token punctuation">,</span>
                <span class="token class-name">BigInteger</span><span class="token punctuation">.</span><span class="token constant">ZERO</span><span class="token punctuation">,</span>
                calldata
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Fee</span> fee <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">zksEstimateFee</span><span class="token punctuation">(</span>estimate<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Eip712Meta</span> meta <span class="token operator">=</span> estimate<span class="token punctuation">.</span><span class="token function">getEip712Meta</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        meta<span class="token punctuation">.</span><span class="token function">setErgsPerPubdata</span><span class="token punctuation">(</span>fee<span class="token punctuation">.</span><span class="token function">getErgsPerPubdataLimitNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Transaction712</span> transaction <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Transaction712</span><span class="token punctuation">(</span>
                chainId<span class="token punctuation">.</span><span class="token function">longValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                nonce<span class="token punctuation">,</span>
                fee<span class="token punctuation">.</span><span class="token function">getErgsLimitNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                estimate<span class="token punctuation">.</span><span class="token function">getTo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                estimate<span class="token punctuation">.</span><span class="token function">getValueNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                estimate<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                fee<span class="token punctuation">.</span><span class="token function">getMaxPriorityFeePerErgNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                fee<span class="token punctuation">.</span><span class="token function">getErgsPriceLimitNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                signer<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                meta
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> signature <span class="token operator">=</span> signer<span class="token punctuation">.</span><span class="token function">getDomain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenCompose</span><span class="token punctuation">(</span>domain <span class="token operator">-&gt;</span> signer<span class="token punctuation">.</span><span class="token function">signTypedData</span><span class="token punctuation">(</span>domain<span class="token punctuation">,</span> transaction<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> message <span class="token operator">=</span> <span class="token class-name">TransactionEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>transaction<span class="token punctuation">,</span> <span class="token class-name">TransactionEncoder</span><span class="token punctuation">.</span><span class="token function">getSignatureData</span><span class="token punctuation">(</span>signature<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> sentTransactionHash <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">ethSendRawTransaction</span><span class="token punctuation">(</span><span class="token class-name">Numeric</span><span class="token punctuation">.</span><span class="token function">toHexString</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTransactionHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// You can check the transaction status</span>
        <span class="token class-name">TransactionReceipt</span> receipt <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">ethGetTransactionReceipt</span><span class="token punctuation">(</span>sentTransactionHash<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTransactionReceipt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="interacting-with-smart-contracts-via-zksyncwallet" tabindex="-1"><a class="header-anchor" href="#interacting-with-smart-contracts-via-zksyncwallet" aria-hidden="true">#</a> Interacting with smart contracts via ZkSyncWallet</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>abi<span class="token punctuation">.</span>datatypes<span class="token punctuation">.</span></span><span class="token class-name">Function</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>abi<span class="token punctuation">.</span>datatypes<span class="token punctuation">.</span>generated<span class="token punctuation">.</span></span><span class="token class-name">Uint256</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>response<span class="token punctuation">.</span></span><span class="token class-name">TransactionReceipt</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>math<span class="token punctuation">.</span></span><span class="token class-name">BigInteger</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collections</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ZkSyncWallet</span> wallet<span class="token punctuation">;</span> <span class="token comment">// Initialize wallet</span>

        <span class="token class-name">String</span> contractAddress <span class="token operator">=</span> <span class="token string">&quot;0x&lt;contract_address&gt;&quot;</span><span class="token punctuation">;</span>

        <span class="token comment">// Example contract function</span>
        <span class="token class-name">Function</span> contractFunction <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span>
                <span class="token string">&quot;increment&quot;</span><span class="token punctuation">,</span>
                <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singletonList</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Uint256</span><span class="token punctuation">(</span><span class="token class-name">BigInteger</span><span class="token punctuation">.</span><span class="token constant">ONE</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">emptyList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">TransactionReceipt</span> receipt <span class="token operator">=</span> wallet<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>contractAddress<span class="token punctuation">,</span> contractFunction<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="interacting-with-smart-contracts-via-web3j-generic-contract" tabindex="-1"><a class="header-anchor" href="#interacting-with-smart-contracts-via-web3j-generic-contract" aria-hidden="true">#</a> Interacting with smart contracts via Web3j generic Contract</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>signer<span class="token punctuation">.</span></span><span class="token class-name">EthSigner</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>zksync</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">Token</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>fee<span class="token punctuation">.</span></span><span class="token class-name">DefaultTransactionFeeProvider</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>fee<span class="token punctuation">.</span></span><span class="token class-name">ZkTransactionFeeProvider</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>manager<span class="token punctuation">.</span>zksyncTransactionManager</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>response<span class="token punctuation">.</span></span><span class="token class-name">TransactionReceipt</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>tx<span class="token punctuation">.</span>gas<span class="token punctuation">.</span></span><span class="token class-name">DefaultGasProvider</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>math<span class="token punctuation">.</span></span><span class="token class-name">BigInteger</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ZkSync</span> zksync<span class="token punctuation">;</span> <span class="token comment">// Initialize client</span>
        <span class="token class-name">EthSigner</span> signer<span class="token punctuation">;</span> <span class="token comment">// Initialize signer</span>

        <span class="token class-name">ZkTransactionFeeProvider</span> feeProvider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultTransactionFeeProvider</span><span class="token punctuation">(</span>zksync<span class="token punctuation">,</span> <span class="token class-name">Token</span><span class="token punctuation">.</span><span class="token constant">ETH</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        zksyncTransactionManager transactionManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">zksyncTransactionManager</span><span class="token punctuation">(</span>zksync<span class="token punctuation">,</span> signer<span class="token punctuation">,</span> feeProvider<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Wrapper class of a contract generated by Web3j or Epirus ClI</span>
        <span class="token class-name">SomeContract</span> contract <span class="token operator">=</span> <span class="token class-name">SomeContract</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">&quot;0x&lt;contract_address&gt;&quot;</span><span class="token punctuation">,</span> zksync<span class="token punctuation">,</span> transactionManager<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">DefaultGasProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Generated method in wrapper</span>
        <span class="token class-name">TransactionReceipt</span> receipt <span class="token operator">=</span> contract<span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token class-name">BigInteger</span><span class="token punctuation">.</span><span class="token constant">ONE</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//The same way you can call read function</span>

        <span class="token class-name">BigInteger</span> result <span class="token operator">=</span> contract<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="transfer-funds" tabindex="-1"><a class="header-anchor" href="#transfer-funds" aria-hidden="true">#</a> Transfer funds</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>abi<span class="token punctuation">.</span></span><span class="token class-name">TransactionEncoder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>signer<span class="token punctuation">.</span></span><span class="token class-name">EthSigner</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">Eip712Meta</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">Transaction</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>zksync</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">ZkBlockParameterName</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>fee<span class="token punctuation">.</span></span><span class="token class-name">Fee</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>type<span class="token punctuation">.</span></span><span class="token class-name">Transaction712</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>response<span class="token punctuation">.</span></span><span class="token class-name">TransactionReceipt</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">Convert</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">Numeric</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>math<span class="token punctuation">.</span></span><span class="token class-name">BigInteger</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ZkSync</span> zksync<span class="token punctuation">;</span> <span class="token comment">// Initialize client</span>
        <span class="token class-name">EthSigner</span> signer<span class="token punctuation">;</span> <span class="token comment">// Initialize signer</span>

        <span class="token class-name">BigInteger</span> chainId <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">ethChainId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getChainId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">BigInteger</span> amountInWei <span class="token operator">=</span> <span class="token class-name">Convert</span><span class="token punctuation">.</span><span class="token function">toWei</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Convert<span class="token punctuation">.</span>Unit</span><span class="token punctuation">.</span><span class="token constant">ETHER</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBigInteger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">BigInteger</span> nonce <span class="token operator">=</span> zksync
                <span class="token punctuation">.</span><span class="token function">ethGetTransactionCount</span><span class="token punctuation">(</span>signer<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ZkBlockParameterName</span><span class="token punctuation">.</span><span class="token constant">COMMITTED</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">getTransactionCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Transaction</span> estimate <span class="token operator">=</span> <span class="token class-name">Transaction</span><span class="token punctuation">.</span><span class="token function">createFunctionCallTransaction</span><span class="token punctuation">(</span>
                signer<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string">&quot;0x&lt;receiver_address&gt;&quot;</span><span class="token punctuation">,</span>
                <span class="token class-name">BigInteger</span><span class="token punctuation">.</span><span class="token constant">ZERO</span><span class="token punctuation">,</span>
                <span class="token class-name">BigInteger</span><span class="token punctuation">.</span><span class="token constant">ZERO</span><span class="token punctuation">,</span>
                amountInWei<span class="token punctuation">,</span>
                <span class="token string">&quot;0x&quot;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Fee</span> fee <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">zksEstimateFee</span><span class="token punctuation">(</span>estimate<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Eip712Meta</span> meta <span class="token operator">=</span> estimate<span class="token punctuation">.</span><span class="token function">getEip712Meta</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        meta<span class="token punctuation">.</span><span class="token function">setErgsPerPubdata</span><span class="token punctuation">(</span>fee<span class="token punctuation">.</span><span class="token function">getErgsPerPubdataLimitNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Transaction712</span> transaction <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Transaction712</span><span class="token punctuation">(</span>
                chainId<span class="token punctuation">.</span><span class="token function">longValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                nonce<span class="token punctuation">,</span>
                fee<span class="token punctuation">.</span><span class="token function">getErgsLimitNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                estimate<span class="token punctuation">.</span><span class="token function">getTo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                estimate<span class="token punctuation">.</span><span class="token function">getValueNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                estimate<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                fee<span class="token punctuation">.</span><span class="token function">getMaxPriorityFeePerErgNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                fee<span class="token punctuation">.</span><span class="token function">getErgsPriceLimitNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                signer<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                meta
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> signature <span class="token operator">=</span> signer<span class="token punctuation">.</span><span class="token function">getDomain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenCompose</span><span class="token punctuation">(</span>domain <span class="token operator">-&gt;</span> signer<span class="token punctuation">.</span><span class="token function">signTypedData</span><span class="token punctuation">(</span>domain<span class="token punctuation">,</span> transaction<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> message <span class="token operator">=</span> <span class="token class-name">TransactionEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>transaction<span class="token punctuation">,</span> <span class="token class-name">TransactionEncoder</span><span class="token punctuation">.</span><span class="token function">getSignatureData</span><span class="token punctuation">(</span>signature<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> sentTransactionHash <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">ethSendRawTransaction</span><span class="token punctuation">(</span><span class="token class-name">Numeric</span><span class="token punctuation">.</span><span class="token function">toHexString</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTransactionHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// You can check the transaction status</span>
        <span class="token class-name">TransactionReceipt</span> receipt <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">ethGetTransactionReceipt</span><span class="token punctuation">(</span>sentTransactionHash<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTransactionReceipt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="transfer-funds-erc20-tokens" tabindex="-1"><a class="header-anchor" href="#transfer-funds-erc20-tokens" aria-hidden="true">#</a> Transfer funds (ERC20 tokens)</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>abi<span class="token punctuation">.</span></span><span class="token class-name">TransactionEncoder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>signer<span class="token punctuation">.</span></span><span class="token class-name">EthSigner</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">Eip712Meta</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">Transaction</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>zksync</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">Token</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">ZkBlockParameterName</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>fee<span class="token punctuation">.</span></span><span class="token class-name">Fee</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>type<span class="token punctuation">.</span></span><span class="token class-name">Transaction712</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>wrappers<span class="token punctuation">.</span></span><span class="token class-name">ERC20</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>abi<span class="token punctuation">.</span></span><span class="token class-name">FunctionEncoder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>response<span class="token punctuation">.</span></span><span class="token class-name">TransactionReceipt</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">Numeric</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>math<span class="token punctuation">.</span></span><span class="token class-name">BigInteger</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ZkSync</span> zksync<span class="token punctuation">;</span> <span class="token comment">// Initialize client</span>
        <span class="token class-name">EthSigner</span> signer<span class="token punctuation">;</span> <span class="token comment">// Initialize signer</span>

        <span class="token class-name">BigInteger</span> chainId <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">ethChainId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getChainId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Here we&#39;re getting tokens supported by zksync</span>
        <span class="token class-name">Token</span> token <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">zksGetConfirmedTokens</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">short</span><span class="token punctuation">)</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">findAny</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElseThrow</span><span class="token punctuation">(</span><span class="token class-name">IllegalArgumentException</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">BigInteger</span> amount <span class="token operator">=</span> token<span class="token punctuation">.</span><span class="token function">toBigInteger</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">BigInteger</span> nonce <span class="token operator">=</span> zksync
                <span class="token punctuation">.</span><span class="token function">ethGetTransactionCount</span><span class="token punctuation">(</span>signer<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ZkBlockParameterName</span><span class="token punctuation">.</span><span class="token constant">COMMITTED</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">getTransactionCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> calldata <span class="token operator">=</span> <span class="token class-name">FunctionEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token constant">ERC20</span><span class="token punctuation">.</span><span class="token function">encodeTransfer</span><span class="token punctuation">(</span><span class="token string">&quot;0x&lt;receiver_address&gt;&quot;</span><span class="token punctuation">,</span> amount<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Transaction</span> estimate <span class="token operator">=</span> <span class="token class-name">Transaction</span><span class="token punctuation">.</span><span class="token function">createFunctionCallTransaction</span><span class="token punctuation">(</span>
                signer<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                token<span class="token punctuation">.</span><span class="token function">getL2Address</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token class-name">BigInteger</span><span class="token punctuation">.</span><span class="token constant">ZERO</span><span class="token punctuation">,</span>
                <span class="token class-name">BigInteger</span><span class="token punctuation">.</span><span class="token constant">ZERO</span><span class="token punctuation">,</span>
                calldata
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Fee</span> fee <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">zksEstimateFee</span><span class="token punctuation">(</span>estimate<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Eip712Meta</span> meta <span class="token operator">=</span> estimate<span class="token punctuation">.</span><span class="token function">getEip712Meta</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        meta<span class="token punctuation">.</span><span class="token function">setErgsPerPubdata</span><span class="token punctuation">(</span>fee<span class="token punctuation">.</span><span class="token function">getErgsPerPubdataLimitNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Transaction712</span> transaction <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Transaction712</span><span class="token punctuation">(</span>
                chainId<span class="token punctuation">.</span><span class="token function">longValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                nonce<span class="token punctuation">,</span>
                fee<span class="token punctuation">.</span><span class="token function">getErgsLimitNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                estimate<span class="token punctuation">.</span><span class="token function">getTo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                estimate<span class="token punctuation">.</span><span class="token function">getValueNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                estimate<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                fee<span class="token punctuation">.</span><span class="token function">getMaxPriorityFeePerErgNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                fee<span class="token punctuation">.</span><span class="token function">getErgsPriceLimitNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                signer<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                meta
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> signature <span class="token operator">=</span> signer<span class="token punctuation">.</span><span class="token function">getDomain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenCompose</span><span class="token punctuation">(</span>domain <span class="token operator">-&gt;</span> signer<span class="token punctuation">.</span><span class="token function">signTypedData</span><span class="token punctuation">(</span>domain<span class="token punctuation">,</span> transaction<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> message <span class="token operator">=</span> <span class="token class-name">TransactionEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>transaction<span class="token punctuation">,</span> <span class="token class-name">TransactionEncoder</span><span class="token punctuation">.</span><span class="token function">getSignatureData</span><span class="token punctuation">(</span>signature<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> sentTransactionHash <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">ethSendRawTransaction</span><span class="token punctuation">(</span><span class="token class-name">Numeric</span><span class="token punctuation">.</span><span class="token function">toHexString</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTransactionHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// You can check the transaction status</span>
        <span class="token class-name">TransactionReceipt</span> receipt <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">ethGetTransactionReceipt</span><span class="token punctuation">(</span>sentTransactionHash<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTransactionReceipt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="transfer-funds-via-zksyncwallet" tabindex="-1"><a class="header-anchor" href="#transfer-funds-via-zksyncwallet" aria-hidden="true">#</a> Transfer funds via ZkSyncWallet</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">Token</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>response<span class="token punctuation">.</span></span><span class="token class-name">TransactionReceipt</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>math<span class="token punctuation">.</span></span><span class="token class-name">BigDecimal</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>math<span class="token punctuation">.</span></span><span class="token class-name">BigInteger</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ZkSyncWallet</span> wallet<span class="token punctuation">;</span> <span class="token comment">// Initialize wallet</span>

        <span class="token class-name">BigInteger</span> amount <span class="token operator">=</span> <span class="token class-name">Token</span><span class="token punctuation">.</span><span class="token constant">ETH</span><span class="token punctuation">.</span><span class="token function">toBigInteger</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">TransactionReceipt</span> receipt <span class="token operator">=</span> wallet<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span><span class="token string">&quot;0x&lt;receiver_address&gt;&quot;</span><span class="token punctuation">,</span> amount<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//You can check balance</span>
        <span class="token class-name">BigInteger</span> balance <span class="token operator">=</span> wallet<span class="token punctuation">.</span><span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//Also, you can convert amount number to decimal</span>
        <span class="token class-name">BigDecimal</span> decimalBalance <span class="token operator">=</span> <span class="token class-name">Token</span><span class="token punctuation">.</span><span class="token constant">ETH</span><span class="token punctuation">.</span><span class="token function">intoDecimal</span><span class="token punctuation">(</span>balance<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="withdraw-funds" tabindex="-1"><a class="header-anchor" href="#withdraw-funds" aria-hidden="true">#</a> Withdraw funds</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>abi<span class="token punctuation">.</span></span><span class="token class-name">TransactionEncoder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>signer<span class="token punctuation">.</span></span><span class="token class-name">EthSigner</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">Eip712Meta</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">Transaction</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>zksync</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">Token</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">ZkBlockParameterName</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>fee<span class="token punctuation">.</span></span><span class="token class-name">Fee</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>type<span class="token punctuation">.</span></span><span class="token class-name">Transaction712</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>wrappers<span class="token punctuation">.</span></span><span class="token class-name">IL2Bridge</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>abi<span class="token punctuation">.</span></span><span class="token class-name">FunctionEncoder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>abi<span class="token punctuation">.</span>datatypes<span class="token punctuation">.</span></span><span class="token class-name">Function</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>response<span class="token punctuation">.</span></span><span class="token class-name">TransactionReceipt</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">Numeric</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>math<span class="token punctuation">.</span></span><span class="token class-name">BigInteger</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ZkSync</span> zksync<span class="token punctuation">;</span> <span class="token comment">// Initialize client</span>
        <span class="token class-name">EthSigner</span> signer<span class="token punctuation">;</span> <span class="token comment">// Initialize signer</span>

        <span class="token class-name">BigInteger</span> chainId <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">ethChainId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getChainId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">BigInteger</span> nonce <span class="token operator">=</span> zksync
                <span class="token punctuation">.</span><span class="token function">ethGetTransactionCount</span><span class="token punctuation">(</span>signer<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ZkBlockParameterName</span><span class="token punctuation">.</span><span class="token constant">COMMITTED</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">getTransactionCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Get address of the default bridge contract</span>
        <span class="token class-name">String</span> l2EthBridge <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">zksGetBridgeContracts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getL2EthDefaultBridge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">Function</span> withdraw <span class="token operator">=</span> <span class="token class-name">IL2Bridge</span><span class="token punctuation">.</span><span class="token function">encodeWithdraw</span><span class="token punctuation">(</span>signer<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Token</span><span class="token punctuation">.</span><span class="token constant">ETH</span><span class="token punctuation">.</span><span class="token function">getL2Address</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Token</span><span class="token punctuation">.</span><span class="token constant">ETH</span><span class="token punctuation">.</span><span class="token function">toBigInteger</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> calldata <span class="token operator">=</span> <span class="token class-name">FunctionEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>withdraw<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Transaction</span> estimate <span class="token operator">=</span> <span class="token class-name">Transaction</span><span class="token punctuation">.</span><span class="token function">createFunctionCallTransaction</span><span class="token punctuation">(</span>
                signer<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                l2EthBridge<span class="token punctuation">,</span>
                <span class="token class-name">BigInteger</span><span class="token punctuation">.</span><span class="token constant">ZERO</span><span class="token punctuation">,</span>
                <span class="token class-name">BigInteger</span><span class="token punctuation">.</span><span class="token constant">ZERO</span><span class="token punctuation">,</span>
                calldata
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Fee</span> fee <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">zksEstimateFee</span><span class="token punctuation">(</span>estimate<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Eip712Meta</span> meta <span class="token operator">=</span> estimate<span class="token punctuation">.</span><span class="token function">getEip712Meta</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        meta<span class="token punctuation">.</span><span class="token function">setErgsPerPubdata</span><span class="token punctuation">(</span>fee<span class="token punctuation">.</span><span class="token function">getErgsPerPubdataLimitNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Transaction712</span> transaction <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Transaction712</span><span class="token punctuation">(</span>
                chainId<span class="token punctuation">.</span><span class="token function">longValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                nonce<span class="token punctuation">,</span>
                fee<span class="token punctuation">.</span><span class="token function">getErgsLimitNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                estimate<span class="token punctuation">.</span><span class="token function">getTo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                estimate<span class="token punctuation">.</span><span class="token function">getValueNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                estimate<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                fee<span class="token punctuation">.</span><span class="token function">getMaxPriorityFeePerErgNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                fee<span class="token punctuation">.</span><span class="token function">getErgsPriceLimitNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                signer<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                meta
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> signature <span class="token operator">=</span> signer<span class="token punctuation">.</span><span class="token function">getDomain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenCompose</span><span class="token punctuation">(</span>domain <span class="token operator">-&gt;</span> signer<span class="token punctuation">.</span><span class="token function">signTypedData</span><span class="token punctuation">(</span>domain<span class="token punctuation">,</span> transaction<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> message <span class="token operator">=</span> <span class="token class-name">TransactionEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>transaction<span class="token punctuation">,</span> <span class="token class-name">TransactionEncoder</span><span class="token punctuation">.</span><span class="token function">getSignatureData</span><span class="token punctuation">(</span>signature<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> sentTransactionHash <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">ethSendRawTransaction</span><span class="token punctuation">(</span><span class="token class-name">Numeric</span><span class="token punctuation">.</span><span class="token function">toHexString</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTransactionHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// You can check the transaction status</span>
        <span class="token class-name">TransactionReceipt</span> receipt <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">ethGetTransactionReceipt</span><span class="token punctuation">(</span>sentTransactionHash<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTransactionReceipt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="withdraw-funds-erc20-tokens" tabindex="-1"><a class="header-anchor" href="#withdraw-funds-erc20-tokens" aria-hidden="true">#</a> Withdraw funds (ERC20 tokens)</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>abi<span class="token punctuation">.</span></span><span class="token class-name">TransactionEncoder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>signer<span class="token punctuation">.</span></span><span class="token class-name">EthSigner</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">Eip712Meta</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">Transaction</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>zksync</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">Token</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">ZkBlockParameterName</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>fee<span class="token punctuation">.</span></span><span class="token class-name">Fee</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>type<span class="token punctuation">.</span></span><span class="token class-name">Transaction712</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>wrappers<span class="token punctuation">.</span></span><span class="token class-name">IL2Bridge</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>abi<span class="token punctuation">.</span></span><span class="token class-name">FunctionEncoder</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>abi<span class="token punctuation">.</span>datatypes<span class="token punctuation">.</span></span><span class="token class-name">Function</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>response<span class="token punctuation">.</span></span><span class="token class-name">TransactionReceipt</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>utils<span class="token punctuation">.</span></span><span class="token class-name">Numeric</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>math<span class="token punctuation">.</span></span><span class="token class-name">BigInteger</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ZkSync</span> zksync<span class="token punctuation">;</span> <span class="token comment">// Initialize client</span>
        <span class="token class-name">EthSigner</span> signer<span class="token punctuation">;</span> <span class="token comment">// Initialize signer</span>

        <span class="token class-name">BigInteger</span> chainId <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">ethChainId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getChainId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">BigInteger</span> nonce <span class="token operator">=</span> zksync
                <span class="token punctuation">.</span><span class="token function">ethGetTransactionCount</span><span class="token punctuation">(</span>signer<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ZkBlockParameterName</span><span class="token punctuation">.</span><span class="token constant">COMMITTED</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">getTransactionCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Here we&#39;re getting tokens supported by zksync</span>
        <span class="token class-name">Token</span> token <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">zksGetConfirmedTokens</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">short</span><span class="token punctuation">)</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">findAny</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElseThrow</span><span class="token punctuation">(</span><span class="token class-name">IllegalArgumentException</span><span class="token operator">::</span><span class="token keyword">new</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Get address of the default bridge contract (ERC20)</span>
        <span class="token class-name">String</span> l2Erc20Bridge <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">zksGetBridgeContracts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getL2Erc20DefaultBridge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> <span class="token class-name">Function</span> withdraw <span class="token operator">=</span> <span class="token class-name">IL2Bridge</span><span class="token punctuation">.</span><span class="token function">encodeWithdraw</span><span class="token punctuation">(</span>signer<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> token<span class="token punctuation">.</span><span class="token function">getL2Address</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> token<span class="token punctuation">.</span><span class="token function">toBigInteger</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> calldata <span class="token operator">=</span> <span class="token class-name">FunctionEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>withdraw<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Transaction</span> estimate <span class="token operator">=</span> <span class="token class-name">Transaction</span><span class="token punctuation">.</span><span class="token function">createFunctionCallTransaction</span><span class="token punctuation">(</span>
                signer<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                l2Erc20Bridge<span class="token punctuation">,</span>
                <span class="token class-name">BigInteger</span><span class="token punctuation">.</span><span class="token constant">ZERO</span><span class="token punctuation">,</span>
                <span class="token class-name">BigInteger</span><span class="token punctuation">.</span><span class="token constant">ZERO</span><span class="token punctuation">,</span>
                calldata
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Fee</span> fee <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">zksEstimateFee</span><span class="token punctuation">(</span>estimate<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Eip712Meta</span> meta <span class="token operator">=</span> estimate<span class="token punctuation">.</span><span class="token function">getEip712Meta</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        meta<span class="token punctuation">.</span><span class="token function">setErgsPerPubdata</span><span class="token punctuation">(</span>fee<span class="token punctuation">.</span><span class="token function">getErgsPerPubdataLimitNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Transaction712</span> transaction <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Transaction712</span><span class="token punctuation">(</span>
                chainId<span class="token punctuation">.</span><span class="token function">longValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                nonce<span class="token punctuation">,</span>
                fee<span class="token punctuation">.</span><span class="token function">getErgsLimitNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                estimate<span class="token punctuation">.</span><span class="token function">getTo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                estimate<span class="token punctuation">.</span><span class="token function">getValueNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                estimate<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                fee<span class="token punctuation">.</span><span class="token function">getMaxPriorityFeePerErgNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                fee<span class="token punctuation">.</span><span class="token function">getErgsPriceLimitNumber</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                signer<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                meta
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> signature <span class="token operator">=</span> signer<span class="token punctuation">.</span><span class="token function">getDomain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">thenCompose</span><span class="token punctuation">(</span>domain <span class="token operator">-&gt;</span> signer<span class="token punctuation">.</span><span class="token function">signTypedData</span><span class="token punctuation">(</span>domain<span class="token punctuation">,</span> transaction<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> message <span class="token operator">=</span> <span class="token class-name">TransactionEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>transaction<span class="token punctuation">,</span> <span class="token class-name">TransactionEncoder</span><span class="token punctuation">.</span><span class="token function">getSignatureData</span><span class="token punctuation">(</span>signature<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> sentTransactionHash <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">ethSendRawTransaction</span><span class="token punctuation">(</span><span class="token class-name">Numeric</span><span class="token punctuation">.</span><span class="token function">toHexString</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTransactionHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// You can check the transaction status</span>
        <span class="token class-name">TransactionReceipt</span> receipt <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">ethGetTransactionReceipt</span><span class="token punctuation">(</span>sentTransactionHash<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTransactionReceipt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="withdraw-funds-via-zksyncwallet" tabindex="-1"><a class="header-anchor" href="#withdraw-funds-via-zksyncwallet" aria-hidden="true">#</a> Withdraw funds via ZkSyncWallet</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">Token</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>web3j<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>response<span class="token punctuation">.</span></span><span class="token class-name">TransactionReceipt</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>math<span class="token punctuation">.</span></span><span class="token class-name">BigInteger</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ZkSyncWallet</span> wallet<span class="token punctuation">;</span> <span class="token comment">// Initialize wallet</span>

        <span class="token class-name">BigInteger</span> amount <span class="token operator">=</span> <span class="token class-name">Token</span><span class="token punctuation">.</span><span class="token constant">ETH</span><span class="token punctuation">.</span><span class="token function">toBigInteger</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// ETH By default</span>
        <span class="token class-name">TransactionReceipt</span> receipt <span class="token operator">=</span> wallet<span class="token punctuation">.</span><span class="token function">withdraw</span><span class="token punctuation">(</span><span class="token string">&quot;0x&lt;receiver_address&gt;&quot;</span><span class="token punctuation">,</span> amount<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Also we can withdraw ERC20 token</span>
        <span class="token class-name">Token</span> token<span class="token punctuation">;</span>

        <span class="token class-name">TransactionReceipt</span> receipt <span class="token operator">=</span> wallet<span class="token punctuation">.</span><span class="token function">withdraw</span><span class="token punctuation">(</span><span class="token string">&quot;0x&lt;receiver_address&gt;&quot;</span><span class="token punctuation">,</span> amount<span class="token punctuation">,</span> token<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="wallet" tabindex="-1"><a class="header-anchor" href="#wallet" aria-hidden="true">#</a> Wallet</h2><p>获取执行交易的价格</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>signer<span class="token punctuation">.</span></span><span class="token class-name">EthSigner</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">Transaction</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>zksync</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>fee<span class="token punctuation">.</span></span><span class="token class-name">Fee</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>math<span class="token punctuation">.</span></span><span class="token class-name">BigInteger</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ZkSync</span> zksync<span class="token punctuation">;</span> <span class="token comment">// Initialize client</span>

        <span class="token class-name">Transaction</span> forEstimate<span class="token punctuation">;</span> <span class="token comment">// Create transaction as described above</span>

        <span class="token class-name">Fee</span> fee <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">zksEstimateFee</span><span class="token punctuation">(</span>forEstimate<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Also possible to use eth_estimateGas</span>
        <span class="token class-name">BigInteger</span> gasUsed <span class="token operator">=</span> zksync<span class="token punctuation">.</span><span class="token function">ethEstimateGas</span><span class="token punctuation">(</span>forEstimate<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAmountUsed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="get-fee-via-transactionfeeprovider" tabindex="-1"><a class="header-anchor" href="#get-fee-via-transactionfeeprovider" aria-hidden="true">#</a> Get fee via TransactionFeeProvider</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>methods<span class="token punctuation">.</span>request<span class="token punctuation">.</span></span><span class="token class-name">Transaction</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>zksync</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>protocol<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">Token</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>fee<span class="token punctuation">.</span></span><span class="token class-name">DefaultTransactionFeeProvider</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>fee<span class="token punctuation">.</span></span><span class="token class-name">Fee</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>zksync<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>fee<span class="token punctuation">.</span></span><span class="token class-name">ZkTransactionFeeProvider</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ZkSync</span> zksync<span class="token punctuation">;</span> <span class="token comment">// Initialize client</span>

        <span class="token class-name">ZkTransactionFeeProvider</span> feeProvider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultTransactionFeeProvider</span><span class="token punctuation">(</span>zksync<span class="token punctuation">,</span> <span class="token class-name">Token</span><span class="token punctuation">.</span><span class="token constant">ETH</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Transaction</span> forEstimate<span class="token punctuation">;</span> <span class="token comment">// Create transaction as described above</span>

        <span class="token class-name">Fee</span> fee <span class="token operator">=</span> feeProvider<span class="token punctuation">.</span><span class="token function">getFee</span><span class="token punctuation">(</span>forEstimate<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,46);function w(h,T){const p=t("RouterLink"),c=t("ExternalLinkIcon");return o(),i("div",null,[r,d,m,n("div",v,[b,n("p",null,[s("本节文档正在审查中，以反映对系统合约所做的修改（"),a(p,{to:"/api/java/dev/troubleshooting/changelog.html"},{default:l(()=>[s("见changelog")]),_:1}),s("）。修订后的版本很快就会推出。")])]),g,n("p",null,[s("本指南假定你熟悉"),n("a",y,[s("Java"),a(c)]),s("编程语言的基础知识。")]),f])}const E=e(k,[["render",w],["__file","getting-started.html.vue"]]);export{E as default};
