(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{464:function(t,e,s){"use strict";s.r(e);var a=s(32),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"handling-events"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#handling-events"}},[t._v("#")]),t._v(" Handling events")]),t._v(" "),s("h2",{attrs:{id:"overview"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#overview"}},[t._v("#")]),t._v(" Overview")]),t._v(" "),s("p",[t._v("Events are a mechanism to publish information to listeners outside the blockchain, given that smart contracts themselves can't read them.")]),t._v(" "),s("p",[t._v("Blockchains are public by design, and therefore make all information available to the public, and any actions can be discovered by carefully looking into the transactions. Events are a shortcut for making specific information easily available for external systems; they let dApps keep track of, and respond to what's happening to a smart contract. They can also be searched for because they are indexable. Therefore, you should emit an event anytime something occurs in your smart contract that some system outside the blockchain should be aware of so that the outside system may listen for such occurrences.\nEvents are included in the transaction logs of the same block containing the original transaction.")]),t._v(" "),s("p",[t._v("At zkSync, events behave the same way as in Ethereum.")]),t._v(" "),s("h2",{attrs:{id:"events-filtering"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#events-filtering"}},[t._v("#")]),t._v(" Events filtering")]),t._v(" "),s("p",[t._v("Filtering is used to query indexed data and provide lower-cost data storage when the data is not required to be accessed on-chain.")]),t._v(" "),s("p",[t._v("These can be used in conjunction with the "),s("a",{attrs:{href:"https://docs.ethers.io/v5/api/providers/provider/#Provider--event-methods",target:"_blank",rel:"noopener noreferrer"}},[t._v("Provider Events API"),s("OutboundLink")],1),t._v(" and with the "),s("a",{attrs:{href:"https://docs.ethers.io/v5/api/contract/contract/#Contract--events",target:"_blank",rel:"noopener noreferrer"}},[t._v("Contract Events API"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("div",{staticClass:"language-solidity extra-class"},[s("pre",{pre:!0,attrs:{class:"language-solidity"}},[s("code",[t._v("    abi "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"event Transfer(address indexed src, address indexed dst, uint val)"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("contract")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Contract")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tokenAddress"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" abi"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" provider"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// List all token transfers *to* myAddress:")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("contract")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("filters"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Transfer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("null"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" myAddress"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//    "jsonrpc":"2.0",')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//   "id":1,')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//    "method":"eth_getLogs",')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//    "params":[{')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//       "fromBlock": "0x8e8e6",')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//        "toBlock": "0x8e8e6",')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//        "topics": [["0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef"]]')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//    }]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//}")]),t._v("\n\n")])])]),s("p",[t._v("zkSync has a 10K log limit per response.")])])}),[],!1,null,null,null);e.default=n.exports}}]);