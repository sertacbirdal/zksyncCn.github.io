(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{426:function(t,a,s){"use strict";s.r(a);var e=s(32),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"web3-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#web3-api"}},[t._v("#")]),t._v(" Web3 API")]),t._v(" "),s("p",[t._v("Web3 API")]),t._v(" "),s("p",[t._v("zkSync 2.0 完全支持标准 "),s("a",{attrs:{href:"https://ethereum.org/en/developers/docs/apis/json-rpc/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Ethereum JSON-RPC API"),s("OutboundLink")],1),t._v(" ，并添加了一些特定于 L2 的功能。")]),t._v(" "),s("p",[t._v("只要代码不涉及部署新的智能合约（它们只能使用 EIP712 交易进行部署，更多关于[下面]（#eip712）），"),s("em",[t._v("不需要对代码库进行任何更改。")]),t._v(" 可以继续使用当前正在使用的 SDK。 用户将继续以 ETH 支付费用，用户体验将与以太坊相同。")]),t._v(" "),s("p",[t._v("然而，zkSync 有其细节，本节将对此进行描述。")]),t._v(" "),s("h2",{attrs:{id:"eip712"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#eip712"}},[t._v("#")]),t._v(" EIP712")]),t._v(" "),s("p",[t._v("要指定其他字段，例如自定义帐户的自定义签名或选择付款人，应使用 EIP712 交易。 这些交易具有与标准以太坊交易相同的字段，但它们也有包含额外的 L2 特定数据（"),s("code",[t._v("paymaster")]),t._v(" 等）的字段。")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ergsPerPubdata"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1212"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"customSignature"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x..."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"paymasterParams"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"paymaster"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x..."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"paymasterInput"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x..."')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"factory_deps"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x..."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("ul",[s("li",[s("code",[t._v("ergsPerPubdata")]),t._v("：是一个描述用户愿意为单个字节的 pubdata 支付的最大 erg 数量的字段。")]),t._v(" "),s("li",[s("code",[t._v("customSignature")]),t._v(" 是带有自定义签名的字段，以防签名者的帐户不是 EOA。")]),t._v(" "),s("li",[s("code",[t._v("paymasterParams")]),t._v(" 是一个带有参数的字段，用于为交易配置自定义 paymaster。 paymaster 的地址和调用它的编码输入在 paymaster 参数中。")]),t._v(" "),s("li",[s("code",[t._v("factory_deps")]),t._v(" 是一个字段，应该是用于部署事务的非空 "),s("code",[t._v("bytes")]),t._v(" 数组。它应该包含正在部署的合约的字节码。如果部署的合约是工厂合约，即它可以部署其他合约，则该数组还应包含它可以部署的合约的字节码。")])]),t._v(" "),s("p",[t._v("为了让服务器识别 EIP712 交易，"),s("code",[t._v("transaction_type")]),t._v(" 字段等于 "),s("code",[t._v("113")]),t._v("（不幸的是，数字 "),s("code",[t._v("712")]),t._v(" 不能用作 "),s("code",[t._v("transaction_type")]),t._v("，因为类型必须是一个字节长）。")]),t._v(" "),s("p",[t._v("用户没有签署 RLP 编码的交易，而是签署了以下类型的 EIP712 结构：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Field name")]),t._v(" "),s("th",[t._v("Type")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("txType")]),t._v(" "),s("td",[s("code",[t._v("uint256")])])]),t._v(" "),s("tr",[s("td",[t._v("from")]),t._v(" "),s("td",[s("code",[t._v("uint256")])])]),t._v(" "),s("tr",[s("td",[t._v("to")]),t._v(" "),s("td",[s("code",[t._v("uint256")])])]),t._v(" "),s("tr",[s("td",[t._v("ergsLimit")]),t._v(" "),s("td",[s("code",[t._v("uint256")])])]),t._v(" "),s("tr",[s("td",[t._v("ergsPerPubdataByteLimit")]),t._v(" "),s("td",[s("code",[t._v("uint256")])])]),t._v(" "),s("tr",[s("td",[t._v("maxFeePerErg")]),t._v(" "),s("td",[s("code",[t._v("uint256")])])]),t._v(" "),s("tr",[s("td",[t._v("maxPriorityFeePerErg")]),t._v(" "),s("td",[s("code",[t._v("uint256")])])]),t._v(" "),s("tr",[s("td",[t._v("paymaster")]),t._v(" "),s("td",[s("code",[t._v("uint256")])])]),t._v(" "),s("tr",[s("td",[t._v("nonce")]),t._v(" "),s("td",[s("code",[t._v("uint256")])])]),t._v(" "),s("tr",[s("td",[t._v("value")]),t._v(" "),s("td",[s("code",[t._v("uint256")])])]),t._v(" "),s("tr",[s("td",[t._v("data")]),t._v(" "),s("td",[s("code",[t._v("bytes")])])]),t._v(" "),s("tr",[s("td",[t._v("factoryDeps")]),t._v(" "),s("td",[s("code",[t._v("bytes32[]")])])]),t._v(" "),s("tr",[s("td",[t._v("paymasterInput")]),t._v(" "),s("td",[s("code",[t._v("bytes")])])])])]),t._v(" "),s("p",[t._v("我们的 "),s("RouterLink",{attrs:{to:"/api/js/features.html"}},[t._v("SDK")]),t._v(" 可以方便地处理这些字段。")],1),t._v(" "),s("h2",{attrs:{id:"zksync-特定的-json-rpc-方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zksync-特定的-json-rpc-方法"}},[t._v("#")]),t._v(" zkSync 特定的 JSON-RPC 方法")]),t._v(" "),s("p",[t._v("所有 zkSync 特定的方法都位于 "),s("code",[t._v("zks_")]),t._v(" 命名空间中。 API 还可能提供此处以外的方法。 这些方法是给团队内部使用的，非常不稳定。")]),t._v(" "),s("p",[t._v("：：： 警告")]),t._v(" "),s("p",[t._v("请注意，Metamask 不支持 zks_ 命名空间的方法，我们正在努力在未来支持它，或者，您可以将 "),s("code",[t._v("Provider")]),t._v(" 类与测试网 RPC 一起使用，而不是依赖 Metamask 的注入提供程序。")]),t._v(" "),s("p",[t._v(":::")]),t._v(" "),s("h3",{attrs:{id:"zks-getmaincontract"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zks-getmaincontract"}},[t._v("#")]),t._v(" "),s("code",[t._v("zks_getMainContract")])]),t._v(" "),s("p",[t._v("返回 zkSync 合约的地址。")]),t._v(" "),s("h3",{attrs:{id:"输入参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#输入参数"}},[t._v("#")]),t._v(" 输入参数")]),t._v(" "),s("p",[t._v("没有。")]),t._v(" "),s("h3",{attrs:{id:"输出的格式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#输出的格式"}},[t._v("#")]),t._v(" 输出的格式")]),t._v(" "),s("p",[s("code",[t._v('"0xaBEA9132b05A70803a4E85094fD0e1800777fBEF"')])]),t._v(" "),s("h3",{attrs:{id:"zks-l1chainid"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zks-l1chainid"}},[t._v("#")]),t._v(" "),s("code",[t._v("zks_L1ChainId")])]),t._v(" "),s("p",[t._v("返回底层 L1 的链 ID。")]),t._v(" "),s("h3",{attrs:{id:"输入的参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#输入的参数"}},[t._v("#")]),t._v(" 输入的参数")]),t._v(" "),s("p",[t._v("没有。")]),t._v(" "),s("h3",{attrs:{id:"输出的格式-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#输出的格式-2"}},[t._v("#")]),t._v(" 输出的格式")]),t._v(" "),s("p",[s("code",[t._v("12")])]),t._v(" "),s("h3",{attrs:{id:"zks-getconfirmedtokens"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zks-getconfirmedtokens"}},[t._v("#")]),t._v(" "),s("code",[t._v("zks_getConfirmedTokens")])]),t._v(" "),s("p",[t._v("给定 "),s("code",[t._v("from")]),t._v(" 和 "),s("code",[t._v("limit")]),t._v(" 返回有关 ID 在区间 "),s("code",[t._v("[from..from+limit-1]")]),t._v(" 中的已确认令牌的信息。 “确认”在这里是错误的词，因为确认令牌已经通过默认的 zkSync 桥接。")]),t._v(" "),s("p",[t._v("令牌按其符号的字母顺序返回，因此令牌的 id 只是它在已按符号排序的令牌数组中的位置。")]),t._v(" "),s("h3",{attrs:{id:"输入参数-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#输入参数-2"}},[t._v("#")]),t._v(" 输入参数")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("名称")]),t._v(" "),s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("from")]),t._v(" "),s("td",[s("code",[t._v("uint32")])]),t._v(" "),s("td",[t._v("从中开始返回有关代币信息的代币 ID。")])]),t._v(" "),s("tr",[s("td",[t._v("limit")]),t._v(" "),s("td",[s("code",[t._v("uint8")])]),t._v(" "),s("td",[t._v("从 API 返回的代币数。")])])])]),t._v(" "),s("h3",{attrs:{id:"输出格式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#输出格式"}},[t._v("#")]),t._v(" 输出格式")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"address"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"decimals"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ETH"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"symbol"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ETH"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"address"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xd2255612f9b045e9c81244bb874abb413ca139a3"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"decimals"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TrueUSD"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"symbol"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TUSD"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"address"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xd35cceead182dcee0f148ebac9447da2c4d449c4"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"decimals"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"USD Coin (goerli)"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"symbol"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"USDC"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("h3",{attrs:{id:"zks-getl2tol1logproof"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zks-getl2tol1logproof"}},[t._v("#")]),t._v(" "),s("code",[t._v("zks_getL2ToL1LogProof")])]),t._v(" "),s("p",[t._v("给定一个区块、一个发件人和一个消息，以及包含L1->L2消息的区块中可选的消息日志索引，返回通过L1Messenger系统合同发送的消息的证明。")]),t._v(" "),s("h3",{attrs:{id:"input-parameters"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#input-parameters"}},[t._v("#")]),t._v(" Input parameters")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Parameter")]),t._v(" "),s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("Description")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("block")]),t._v(" "),s("td",[s("code",[t._v("uint32")])]),t._v(" "),s("td",[t._v("发出该消息的区块编号。")])]),t._v(" "),s("tr",[s("td",[t._v("sender")]),t._v(" "),s("td",[s("code",[t._v("address")])]),t._v(" "),s("td",[t._v("消息的发件人（即调用L1Messenger系统合同的账户）。")])]),t._v(" "),s("tr",[s("td",[t._v("msg")]),t._v(" "),s("td",[s("code",[t._v("uint256")])]),t._v(" "),s("td",[t._v("发送信息的keccak256哈希值。")])]),t._v(" "),s("tr",[s("td",[t._v("l2_log_position")]),t._v(" "),s("td",[s("code",[t._v("uint256")])]),t._v(" "),s("td",[s("code",[t._v("null")])])])])]),t._v(" "),s("p",[t._v("可以从交易收据中获得的日志索引（它包括交易产生的每条日志的列表）。")]),t._v(" "),s("h3",{attrs:{id:"输入参数-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#输入参数-3"}},[t._v("#")]),t._v(" 输入参数")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("范围")]),t._v(" "),s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("tx_hash")]),t._v(" "),s("td",[s("code",[t._v("bytes32")])]),t._v(" "),s("td",[t._v("生成 L2 到 L1 日志的 L2 交易哈希。")])]),t._v(" "),s("tr",[s("td",[t._v("l2_to_l1_log_index")]),t._v(" "),s("td",[s("code",[t._v("undefined")]),t._v(" | "),s("code",[t._v("number")])]),t._v(" "),s("td",[t._v("交易中 L2 到 L1 日志的索引。")])])])]),t._v(" "),s("h3",{attrs:{id:"输出格式-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#输出格式-2"}},[t._v("#")]),t._v(" 输出格式")]),t._v(" "),s("p",[t._v("如果没有这样的消息，则返回值为"),s("code",[t._v("null")]),t._v("。")]),t._v(" "),s("p",[t._v("否则，返回如下格式的对象：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"proof"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x66687aadf862bd776c8fc18b8e9f8e20089714856ee233b3902a591d0d5f2925"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x2eeb74a6177f588d80c0c752b99556902ddf9682d0b906f5aa2adbaf8466a4e9"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x1223349a40d2ee10bd1bebb5889ef8018c8bc13359ed94b387810af96c6e4268"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x5b82b695a7ac2668e188b75f7d4fa79faa504117d1fdfcbe8a46915c1a8a5191"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"root"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x6a420705824f0a3a7e541994bc15e14e6a8991cd4e4b2d35c66f6e7647760d97"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("code",[t._v("id")]),t._v(" 是该块的 L2->L1 消息的 Merkle 树中叶子的位置。 "),s("code",[t._v("proof")]),t._v(" 是消息的 Merkle 证明，而 "),s("code",[t._v("root")]),t._v(" 是 L2->L1 消息的 Merkle 树的根。 请注意，Merkle 树使用 "),s("em",[t._v("sha256")]),t._v(" 作为树。")]),t._v(" "),s("p",[t._v("您无需关心内在函数，因为返回的 "),s("code",[t._v("id")]),t._v(" 和 "),s("code",[t._v("proof")]),t._v(" 可以立即用于与 zkSync 智能合约交互。")]),t._v(" "),s("p",[t._v("可以在 "),s("RouterLink",{attrs:{to:"/dev/developer-guides/bridging/l2-l1.html"}},[t._v("此处")]),t._v(" 找到通过我们的 SDK 使用此端点的一个很好的示例。")],1),t._v(" "),s("p",[t._v(":::  实力")]),t._v(" "),s("p",[t._v("交易产生的 L2 到 L1 日志列表，包含在收据中，是 L1Messenger 合约或其他系统合约/bootloader 产生的日志的组合。")]),t._v(" "),s("p",[t._v("引导加载程序为每个 L1 发起的事务生成一个日志，显示事务是否成功。")]),t._v(" "),s("p",[t._v(":::")]),t._v(" "),s("h3",{attrs:{id:"zks-getl2tol1msgproof"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zks-getl2tol1msgproof"}},[t._v("#")]),t._v(" "),s("code",[t._v("zks_getL2ToL1MsgProof")])]),t._v(" "),s("p",[t._v("给定一个块、一个发送者、一条消息和包含 L1->L2 消息的块中的可选消息日志索引，它返回通过 L1Messenger 系统合约发送的消息的证明。")]),t._v(" "),s("h3",{attrs:{id:"input-parameters-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#input-parameters-2"}},[t._v("#")]),t._v(" Input parameters")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Parameter")]),t._v(" "),s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("block")]),t._v(" "),s("td",[s("code",[t._v("uint32")])]),t._v(" "),s("td",[t._v("发出消息的块的编号。")])]),t._v(" "),s("tr",[s("td",[t._v("sender")]),t._v(" "),s("td",[s("code",[t._v("address")])]),t._v(" "),s("td",[t._v("消息的发送者（即调用 L1Messenger 系统合约的账户）。")])]),t._v(" "),s("tr",[s("td",[t._v("msg")]),t._v(" "),s("td",[s("code",[t._v("bytes32")])]),t._v(" "),s("td",[t._v("已发送消息的 keccak256 哈希。")])]),t._v(" "),s("tr",[s("td",[t._v("l2_log_position")]),t._v(" "),s("td",[s("code",[t._v("uint256")]),t._v(" | "),s("code",[t._v("null")])]),t._v(" "),s("td",[t._v("提交此消息时由 "),s("RouterLink",{attrs:{to:"/dev/developer-guides/contracts/system-contracts.html#il1messenger"}},[t._v("L1Messenger")]),t._v(" 发出的事件块中的索引。 如果省略，则返回具有该内容的第一条消息的证明。")],1)])])]),t._v(" "),s("h3",{attrs:{id:"output-format"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#output-format"}},[t._v("#")]),t._v(" Output format")]),t._v(" "),s("p",[t._v("与  "),s("a",{attrs:{href:"#output-format-4"}},[t._v("zks_getL2ToL1LogProof")]),t._v(" 中的相同")]),t._v(" "),s("p",[t._v("::: 警告")]),t._v(" "),s("p",[s("code",[t._v("zks_getL2ToL1MsgProof")]),t._v(" 端点将被弃用，因为 L2 到 L1 消息的证明也可以从"),s("code",[t._v("zks_getL2ToL1LogProof")]),t._v(" 中获取。")]),t._v(" "),s("p",[t._v(":::")]),t._v(" "),s("h3",{attrs:{id:"zks-getbridgecontracts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zks-getbridgecontracts"}},[t._v("#")]),t._v(" "),s("code",[t._v("zks_getBridgeContracts")])]),t._v(" "),s("p",[t._v("返回默认网桥的 L1/L2 地址。")]),t._v(" "),s("h3",{attrs:{id:"输入参数-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#输入参数-4"}},[t._v("#")]),t._v(" 输入参数")]),t._v(" "),s("p",[t._v("没有。")]),t._v(" "),s("h3",{attrs:{id:"输出格式-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#输出格式-3"}},[t._v("#")]),t._v(" 输出格式")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"l1Erc20DefaultBridge"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x7786255495348c08f82c09c82352019fade3bf29"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"l1EthDefaultBridge"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0xcbebcd41ceabbc85da9bb67527f58d69ad4dfff5"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"l2Erc20DefaultBridge"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x92131f10c54f9b251a5deaf3c05815f7659bbe02"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"l2EthDefaultBridge"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x2c5d8a991f399089f728f1ae40bd0b11acd0fb62"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"zks-gettestnetpaymaster"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#zks-gettestnetpaymaster"}},[t._v("#")]),t._v(" "),s("code",[t._v("zks_getTestnetPaymaster")])]),t._v(" "),s("p",[t._v("返回"),s("RouterLink",{attrs:{to:"/api/.../dev/developer-guides/aa.html#testnet-paymaster"}},[t._v("testnet paymaster")]),t._v("的地址：在testnets上可用的paymaster，可以用ERC-20兼容代币支付费用。")],1),t._v(" "),s("h3",{attrs:{id:"输入参数-5"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#输入参数-5"}},[t._v("#")]),t._v(" 输入参数")]),t._v(" "),s("p",[t._v("没有。")]),t._v(" "),s("h3",{attrs:{id:"输出格式-4"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#输出格式-4"}},[t._v("#")]),t._v(" 输出格式")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x7786255495348c08f82c09c82352019fade3bf29"')]),t._v("\n")])])]),t._v(" "),s("h2",{attrs:{id:"发布订阅-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#发布订阅-api"}},[t._v("#")]),t._v(" 发布订阅 API")]),t._v(" "),s("p",[t._v("zkSync 与 "),s("a",{attrs:{href:"https://geth.ethereum.org/docs/rpc/pubsub",target:"_blank",rel:"noopener noreferrer"}},[t._v("Geth 的 pubsub API"),s("OutboundLink")],1),t._v(" 完全兼容，除了 "),s("code",[t._v("syncing")]),t._v(" 订阅，它对 zkSync 网络没有意义，因为从技术上讲我们的 节点始终同步。")]),t._v(" "),s("p",[t._v("WebSocket URL 是 "),s("code",[t._v("wss://zksync2-testnet.zksync.dev/ws")]),t._v("。")])])}),[],!1,null,null,null);a.default=r.exports}}]);