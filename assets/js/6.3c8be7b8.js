(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{400:function(t,a,r){t.exports=r.p+"assets/img/verify-contract.095a5b95.png"},401:function(t,a,r){t.exports=r.p+"assets/img/compiler-version.df916b1b.png"},402:function(t,a,r){t.exports=r.p+"assets/img/contract-verified.70ab9db2.png"},451:function(t,a,r){"use strict";r.r(a);var s=r(32),e=Object(s.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"合约验证"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#合约验证"}},[t._v("#")]),t._v(" 合约验证")]),t._v(" "),s("h2",{attrs:{id:"什么是合约验证"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#什么是合约验证"}},[t._v("#")]),t._v(" 什么是合约验证？")]),t._v(" "),s("p",[t._v("当您在网络上部署智能合约时，您实际上是在部署 Solidity 编译器生成的字节码。")]),t._v(" "),s("p",[t._v("验证合约需要确定链上字节码在编译时是否与给定的源代码匹配。如果是，我们可以声明我们已经确认了字节码源代码的完整性。因此得名——验证。")]),t._v(" "),s("h2",{attrs:{id:"智能合约在-zksync-中是如何验证的"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#智能合约在-zksync-中是如何验证的"}},[t._v("#")]),t._v(" 智能合约在 zkSync 中是如何验证的？")]),t._v(" "),s("p",[t._v("在使用 zkSync 的验证过程中，将部署的字节码和智能合约的 Solidity 源代码进行比较。该算法编译源代码，将生成的字节码与部署的字节码进行比较。")]),t._v(" "),s("br"),t._v("\n如果双方在各方面均匹配，则合约得到验证。\n"),s("p",[t._v("代码验证需要六个参数：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("合约地址")])]),t._v(" "),s("li",[s("p",[t._v("合约名称")])]),t._v(" "),s("li",[s("p",[t._v("源代码，包括所有导入的源")])]),t._v(" "),s("li",[s("p",[t._v("用于生成已部署字节码的编译器版本")])]),t._v(" "),s("li",[s("p",[t._v("有关编译器优化次数的信息（如果有）")])]),t._v(" "),s("li",[s("p",[t._v("构造函数参数")]),t._v(" "),s("p",[t._v("如果这些信息中有任何一条是错误的，则验证过程失败。")])]),t._v(" "),s("li",[s("p",[t._v("The constructor arguments")]),t._v(" "),s("p",[t._v("If any of these pieces of information is wrong, the process of verification fails.")])])]),t._v(" "),s("h2",{attrs:{id:"源代码隐私"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#源代码隐私"}},[t._v("#")]),t._v(" 源代码隐私")]),t._v(" "),s("p",[t._v("当您的智能合约部署在 zkSync 并在区块浏览器上进行验证时，用户可以检查已验证的源代码并与之交互。")]),t._v(" "),s("h2",{attrs:{id:"使用-zksync-区块浏览器验证合约"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-zksync-区块浏览器验证合约"}},[t._v("#")]),t._v(" 使用 zkSync 区块浏览器验证合约")]),t._v(" "),s("p",[t._v("首先点击顶部标题中的 "),s("strong",[t._v("Tools")]),t._v(" 选项卡，在弹出的下拉菜单中选择 "),s("strong",[t._v("Smart Contract Verification")]),t._v("，之后，您将看到以下内容：")]),t._v(" "),s("p",[s("img",{attrs:{src:r(400),alt:"Smart Contract Verification page!",title:"verify contract"}})]),t._v(" "),s("h3",{attrs:{id:"输入合约详细信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#输入合约详细信息"}},[t._v("#")]),t._v(" 输入合约详细信息")]),t._v(" "),s("p",[t._v("要验证合约，请输入以下详细信息：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("合约地址：所提供的地址必须与合约创建时生成的 "),s("code",[t._v("0x")]),t._v(" 地址相匹配。")])]),t._v(" "),s("li",[s("p",[t._v("合约名称：名称必须与合约中提供的名称相同。")])]),t._v(" "),s("li",[s("p",[t._v("优化：检查在编译合约时是否使用了优化。如果在编译期间启用了优化，请选 "),s("strong",[t._v("Yes")]),t._v(" 否则选 "),s("strong",[t._v("No")]),t._v("。")])]),t._v(" "),s("li",[s("p",[t._v("Solidity 编译器版本(Solc)：指定了用于编译智能合约的编译器的版本。单击下拉列表以指定使用的编译器版本。")])]),t._v(" "),s("li",[s("p",[t._v("zkSync 编译器版本(Zksolc)：所使用的 zkSync 编译器版本，默认为 "),s("code",[t._v("v1.2.0")]),t._v("。")]),t._v(" "),s("br")])]),t._v(" "),s("p",[s("img",{attrs:{src:r(401),alt:"编译器版本",title:"compiler version"}})]),t._v(" "),s("br"),t._v(" "),s("ul",[s("li",[s("p",[t._v("输入 Solidity Contract 代码：从你的编辑器中复制代码并将其粘贴到文本区域。")]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("注意：")]),t._v(" 如果 Solidity 代码使用了库或从另一个合约继承依赖项，您可能需要扁平化（flatten）代码。")]),t._v(" "),s("p",[t._v("我们推荐使用 "),s("a",{attrs:{href:"https://medium.com/coinmonks/flattening-smart-contracts-using-hardhat-dffe7dbc7b3f",target:"_blank",rel:"noopener noreferrer"}},[t._v("Hardhat flatten"),s("OutboundLink")],1),t._v("， "),s("a",{attrs:{href:"https://github.com/NomicFoundation/truffle-flattener",target:"_blank",rel:"noopener noreferrer"}},[t._v("Truffle flattener"),s("OutboundLink")],1),t._v(" 或 "),s("a",{attrs:{href:"https://github.com/poanetwork/solidity-flattener",target:"_blank",rel:"noopener noreferrer"}},[t._v("POA Solidity flattener"),s("OutboundLink")],1),t._v("。")])])]),t._v(" "),s("li",[s("p",[t._v("构造函数参数：如果合约需要构造函数参数，则应在此处添加，但应采用 "),s("a",{attrs:{href:"https://solidity.readthedocs.io/en/develop/abi-spec.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ABI 16 进制编码形式"),s("OutboundLink")],1),t._v("。")])])]),t._v(" "),s("br"),t._v(" "),s("h3",{attrs:{id:"如何获得构造函数参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何获得构造函数参数"}},[t._v("#")]),t._v(" 如何获得构造函数参数？")]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("注意：")]),t._v(" 获取构造函数参数数据的最简单方法是在部署时将其打印到控制台。")])]),t._v(" "),s("p",[t._v("例如，假如使用我们的 "),s("RouterLink",{attrs:{to:"/api/tools/hello-world.html"}},[t._v("教程")]),t._v("，您可以找到以下行：")],1),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" greeterContract "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" deployer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("deploy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("artifact"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("greeting"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("如果您将下一行添加为")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("greeterContract"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("interface"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("encodeDeploy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("greeting"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("那么您将收到构造函数参数数据。")]),t._v(" "),s("ul",[s("li",[t._v("最后，单击 "),s("strong",[t._v("Verify Smart Contract")]),t._v(" 按钮。")])]),t._v(" "),s("br"),t._v("\n如果一切顺利，您将看到一条成功消息。\n"),s("br"),t._v(" "),s("p",[s("img",{attrs:{src:r(402),alt:"Smart Contract Verified!",title:"Contract Verified"}})])])}),[],!1,null,null,null);a.default=e.exports}}]);