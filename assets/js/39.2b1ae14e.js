(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{472:function(t,s,a){"use strict";a.r(s);var n=a(32),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"入门"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#入门"}},[t._v("#")]),t._v(" 入门")]),t._v(" "),a("p",[t._v("在本指南中，我们将演示如何：")]),t._v(" "),a("ol",[a("li",[t._v("连接到 zkSync 网络。")]),t._v(" "),a("li",[t._v("将来自以太坊的资产存入 zkSync。")]),t._v(" "),a("li",[t._v("检查余额。")]),t._v(" "),a("li",[t._v("转账和提取资金（原生代币和ERC20代币）。")]),t._v(" "),a("li",[t._v("部署智能合约。")]),t._v(" "),a("li",[t._v("使用 create2 部署智能合约。")])]),t._v(" "),a("h2",{attrs:{id:"先决条件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#先决条件"}},[t._v("#")]),t._v(" 先决条件")]),t._v(" "),a("p",[t._v("本指南假定您熟悉 "),a("a",{attrs:{href:"https://docs.python.org/3/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Python"),a("OutboundLink")],1),t._v(" 编程语言。")]),t._v(" "),a("h1",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),a("p",[t._v("要使用 "),a("code",[t._v("pip install")]),t._v(" 命令安装 SDK，请运行以下命令：")]),t._v(" "),a("div",{staticClass:"language-py extra-class"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[t._v("pip install zksync2\n")])])]),a("h2",{attrs:{id:"运行-sdk-示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行-sdk-示例"}},[t._v("#")]),t._v(" 运行 SDK 示例")]),t._v(" "),a("p",[t._v("要开始使用这个SDK，您只需要上传一个提供的配置。")]),t._v(" "),a("div",{staticClass:"language-py extra-class"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" web3 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Web3\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("module_builder "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" zkSyncBuilder\n\nURL_TO_ETH_NETWORK "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GOERLI_HTTPS_RPC"')]),t._v("\nZKSYNC_NETWORK_URL "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://zksync2-testnet.zksync.dev"')]),t._v("\n\neth_web3 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HTTPProvider"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("URL_TO_ETH_NETWORK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nzkSync_web3 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSyncBuilder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("build"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ZKSYNC_NETWORK_URL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"以太坊签名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#以太坊签名"}},[t._v("#")]),t._v(" 以太坊签名")]),t._v(" "),a("p",[t._v("::: 警告")]),t._v(" "),a("p",[t._v("⚠️ 切勿将私钥提交到文件跟踪历史记录中，否则您的帐户可能会被盗用。")]),t._v(" "),a("p",[t._v(":::")]),t._v(" "),a("p",[t._v("以太坊签名者由来自“zkSync2.signer.eth_signer”的“PrivateKeyEthSigner”抽象类表示。")]),t._v(" "),a("div",{staticClass:"language-py extra-class"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" eth_account "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Account\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" eth_account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("local "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" LocalAccount\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eth_signer "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" PrivateKeyEthSigner\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" os\n\nPRIVATE_KEY "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" os"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("environ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"YOUR_PRIVATE_KEY"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\naccount"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" LocalAccount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("from_key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("PRIVATE_KEY"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nsigner "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" PrivateKeyEthSigner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" chain_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"存入资金"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#存入资金"}},[t._v("#")]),t._v(" 存入资金")]),t._v(" "),a("p",[t._v("此示例显示如何将资金存入地址。")]),t._v(" "),a("div",{staticClass:"language-py extra-class"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" web3 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Web3\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("middleware "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" geth_poa_middleware\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" eth_account "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Account\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" eth_account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("local "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" LocalAccount\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("manage_contracts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gas_provider "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" StaticGasProvider\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("module_builder "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" zkSyncBuilder\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("core"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("types "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Token\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("provider"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eth_provider "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" EthereumProvider\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("deposit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#geth_poa_middleware is used to connect to geth --dev.")]),t._v("\n    eth_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("middleware_onion"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("inject"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("geth_poa_middleware"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" layer"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#calculate  gas fees")]),t._v("\n    gas_provider "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" StaticGasProvider"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("toWei"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gwei"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("555000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Create the ethereum provider for interacting with ethereum node, initialize zkSync signer and deposit funds.")]),t._v("\n    eth_provider "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" EthereumProvider"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("build_ethereum_provider"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                                            eth"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("eth_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                                            account"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                                            gas_provider"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("gas_provider"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    tx_receipt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" eth_provider"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("deposit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Token"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create_eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                    eth_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("toWei"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"YOUR_AMOUNT_OF_ETH"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ether"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                    account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Show the output of the transaction details.")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"tx status: ')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("tx_receipt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'status'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" __name__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"__main__"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    deposit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"查看余额"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看余额"}},[t._v("#")]),t._v(" 查看余额")]),t._v(" "),a("p",[t._v("这个例子展示了如何在 zkSync 网络上查看你的余额。")]),t._v(" "),a("div",{staticClass:"language-py extra-class"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" eth_account "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Account\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" eth_account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("local "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" LocalAccount\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("module_builder "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" zkSyncBuilder\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("core"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("types "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" EthBlockParams\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_account_balance")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    ZKSYNC_NETWORK_URL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://zkSync2-testnet.zkSync.dev'")]),t._v("\n    account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" LocalAccount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("from_key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'YOUR_PRIVATE_KEY'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    zkSync_web3 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSyncBuilder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("build"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ZKSYNC_NETWORK_URL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    zk_balance "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_balance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" EthBlockParams"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LATEST"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"zkSync balance: ')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("zk_balance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" __name__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"__main__"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    get_account_balance"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"转账"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#转账"}},[t._v("#")]),t._v(" 转账")]),t._v(" "),a("p",[t._v("这个例子展示了如何在 zkSync 网络上执行从一个账户到另一个账户的转账。")]),t._v(" "),a("div",{staticClass:"language-py extra-class"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" eth_typing "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" HexStr\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" web3 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Web3\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request_types "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" create_function_call_transaction\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("module_builder "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" zkSyncBuilder\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("core"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("types "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ZkBlockParams\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" eth_account "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Account\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" eth_account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("local "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" LocalAccount\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eth_signer "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" PrivateKeyEthSigner\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("transaction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("transaction712 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Transaction712\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("transfer_to_self")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    ZKSYNC_NETWORK_URL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://zkSync2-testnet.zkSync.dev'")]),t._v("\n    account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" LocalAccount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("from_key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'YOUR_PRIVATE_KEY'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    zkSync_web3 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSyncBuilder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("build"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ZKSYNC_NETWORK_URL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    chain_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("chain_id\n    signer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" PrivateKeyEthSigner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" chain_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    nonce "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_transaction_count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ZkBlockParams"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("COMMITTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    tx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" create_function_call_transaction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("from_"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                          to"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                          ergs_price"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                          ergs_limit"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                          data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("HexStr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0x"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    estimate_gas "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eth_estimate_gas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    gas_price "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gas_price\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"Fee for transaction is: ')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("estimate_gas "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" gas_price"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    tx_712 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Transaction712"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("chain_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("chain_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            nonce"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("nonce"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            gas_limit"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("estimate_gas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            to"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"to"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("Web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("toWei"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.01")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ether'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            maxPriorityFeePerGas"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100000000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            maxFeePerGas"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("gas_price"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            from_"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            meta"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eip712Meta"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    singed_message "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" signer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sign_typed_data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tx_712"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("to_eip712_struct"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    msg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tx_712"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("encode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("singed_message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    tx_hash "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("send_raw_transaction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    tx_receipt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("wait_for_transaction_receipt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tx_hash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" timeout"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("240")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" poll_latency"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"tx status: ')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("tx_receipt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'status'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" __name__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"__main__"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    transfer_to_self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"转账-erc20-代币"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#转账-erc20-代币"}},[t._v("#")]),t._v(" 转账（ERC20 代币）")]),t._v(" "),a("p",[t._v("这个例子展示了如何将 ERC20 代币转移到你在 zkSync 网络上的账户。")]),t._v(" "),a("div",{staticClass:"language-py extra-class"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request_types "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" create_function_call_transaction\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("manage_contracts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("erc20_contract "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ERC20FunctionEncoder\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("module_builder "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" zkSyncBuilder\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("core"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("types "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ZkBlockParams\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" eth_account "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Account\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" eth_account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("local "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" LocalAccount\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eth_signer "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" PrivateKeyEthSigner\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("transaction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("transaction712 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Transaction712\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("transfer_erc20_token")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    ZKSYNC_NETWORK_URL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://zkSync2-testnet.zkSync.dev'")]),t._v("\n    account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" LocalAccount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("from_key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'YOUR_PRIVATE_KEY'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    zkSync_web3 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSyncBuilder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("build"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ZKSYNC_NETWORK_URL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    chain_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("chain_id\n    signer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" PrivateKeyEthSigner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" chain_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    nonce "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_transaction_count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ZkBlockParams"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("COMMITTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    tokens "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zks_get_confirmed_tokens"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    not_eth_tokens "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("x "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" x "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" tokens "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("not")]),t._v(" x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("is_eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    token_address "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" not_eth_tokens"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("l2_address\n\n    erc20_encoder "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ERC20FunctionEncoder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    transfer_params "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    call_data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" erc20_encoder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("encode_method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"transfer"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("transfer_params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    tx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" create_function_call_transaction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("from_"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                          to"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("token_address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                          ergs_price"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                          ergs_limit"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                          data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("call_data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    estimate_gas "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eth_estimate_gas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    gas_price "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gas_price\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"Fee for transaction is: ')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("estimate_gas "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" gas_price"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    tx_712 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Transaction712"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("chain_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("chain_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            nonce"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("nonce"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            gas_limit"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("estimate_gas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            to"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"to"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            maxPriorityFeePerGas"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100000000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            maxFeePerGas"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("gas_price"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            from_"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            meta"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eip712Meta"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    singed_message "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" signer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sign_typed_data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tx_712"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("to_eip712_struct"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    msg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tx_712"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("encode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("singed_message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    tx_hash "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("send_raw_transaction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    tx_receipt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("wait_for_transaction_receipt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tx_hash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" timeout"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("240")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" poll_latency"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"tx status: ')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("tx_receipt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'status'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" __name__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"__main__"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    transfer_erc20_token"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"提取资金"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#提取资金"}},[t._v("#")]),t._v(" 提取资金")]),t._v(" "),a("p",[t._v("此示例显示如何将资金提取到您的帐户中。")]),t._v(" "),a("div",{staticClass:"language-py extra-class"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" decimal "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Decimal\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" eth_typing "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" HexStr\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request_types "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" create_function_call_transaction\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("manage_contracts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("l2_bridge "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" L2BridgeEncoder\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("module_builder "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" zkSyncBuilder\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("core"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("types "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Token"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ZkBlockParams"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" BridgeAddresses\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" eth_account "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Account\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" eth_account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("local "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" LocalAccount\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eth_signer "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" PrivateKeyEthSigner\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("transaction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("transaction712 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Transaction712\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("withdraw")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    ZKSYNC_NETWORK_URL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://zkSync2-testnet.zkSync.dev'")]),t._v("\n    account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" LocalAccount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("from_key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'YOUR_PRIVATE_KEY'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    zkSync_web3 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSyncBuilder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("build"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ZKSYNC_NETWORK_URL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    chain_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("chain_id\n    signer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" PrivateKeyEthSigner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" chain_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    ETH_TOKEN "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Token"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create_eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    nonce "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_transaction_count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ZkBlockParams"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("COMMITTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    bridges"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" BridgeAddresses "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zks_get_bridge_contracts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    l2_func_encoder "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" L2BridgeEncoder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    call_data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" l2_func_encoder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("encode_function"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"withdraw"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        ETH_TOKEN"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("l2_address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        ETH_TOKEN"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("to_int"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Decimal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.001"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    tx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" create_function_call_transaction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("from_"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                          to"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("bridges"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("l2_eth_default_bridge"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                          ergs_limit"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                          ergs_price"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                          data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("HexStr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("call_data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    estimate_gas "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eth_estimate_gas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    gas_price "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gas_price\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"Fee for transaction is: ')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("estimate_gas "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" gas_price"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    tx_712 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Transaction712"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("chain_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("chain_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            nonce"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("nonce"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            gas_limit"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("estimate_gas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            to"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"to"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            maxPriorityFeePerGas"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100000000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            maxFeePerGas"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("gas_price"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            from_"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            meta"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eip712Meta"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    singed_message "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" signer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sign_typed_data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tx_712"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("to_eip712_struct"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    msg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tx_712"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("encode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("singed_message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    tx_hash "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("send_raw_transaction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    tx_receipt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("wait_for_transaction_receipt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tx_hash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" timeout"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("240")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" poll_latency"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"tx status: ')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("tx_receipt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'status'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" __name__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"__main__"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    withdraw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"部署智能合约"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署智能合约"}},[t._v("#")]),t._v(" 部署智能合约")]),t._v(" "),a("p",[t._v("使用 zkSync，您可以使用 "),a("code",[t._v("create")]),t._v(" 方法部署合约，只需将合约构建为二进制格式并将其部署到 zkSync 网络。")]),t._v(" "),a("p",[t._v("在接下来的步骤中，我们将指导您了解它的工作原理。")]),t._v(" "),a("h3",{attrs:{id:"第一步-创建合约"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第一步-创建合约"}},[t._v("#")]),t._v(" 第一步：创建合约")]),t._v(" "),a("p",[t._v("这是一个简单的合约：")]),t._v(" "),a("div",{staticClass:"language-solidity extra-class"},[a("pre",{pre:!0,attrs:{class:"language-solidity"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pragma")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("solidity")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),a("span",{pre:!0,attrs:{class:"token version number"}},[t._v("0.8.0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("contract")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Counter")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("increment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),t._v(" x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("view")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("returns")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint256")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("只能通过 zkSync 编译器编译！")])]),t._v(" "),a("p",[t._v("编译后必须有2个文件：")]),t._v(" "),a("ul",[a("li",[t._v("contract binary representation")]),t._v(" "),a("li",[t._v("contract ABI in JSON format")])]),t._v(" "),a("h3",{attrs:{id:"步骤-2-部署合约"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤-2-部署合约"}},[t._v("#")]),t._v(" 步骤 2：部署合约")]),t._v(" "),a("p",[t._v("要部署合约，需要合约 ABI 以标准的 "),a("code",[t._v("web3")]),t._v(" 方式调用其方法。")]),t._v(" "),a("p",[t._v("在某些情况下，您需要在部署之前获取合约地址。")]),t._v(" "),a("p",[t._v("这是您将如何做的一个例子。")]),t._v(" "),a("div",{staticClass:"language-py extra-class"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" json\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" pathlib "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Path\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" eth_typing "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" HexStr\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" web3 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Web3\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("types "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" TxParams\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request_types "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" create_contract_transaction\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("manage_contracts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("contract_deployer "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ContractDeployer\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("manage_contracts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nonce_holder "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" NonceHolder\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("module_builder "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" zkSyncBuilder\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("core"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("types "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ZkBlockParams"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" EthBlockParams\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" eth_account "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Account\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" eth_account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("local "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" LocalAccount\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eth_signer "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" PrivateKeyEthSigner\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("transaction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("transaction712 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Transaction712\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("read_binary")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rb'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" contact_file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" contact_file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("read"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" data\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_abi")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'r'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" json_f"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" json"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("load"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("json_f"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CounterContractEncoder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("__init__")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bin_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" abi_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("web3 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" web3\n        self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("counter_contract "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("contract"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("abi"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("get_abi"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("abi_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                                       bytecode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("read_binary"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bin_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("encode_method")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fn_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("list")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" HexStr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("counter_contract"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("encodeABI"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("deploy_contract_create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    ZKSYNC_NETWORK_URL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://zkSync2-testnet.zkSync.dev'")]),t._v("\n    account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" LocalAccount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("from_key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'YOUR_PRIVATE_KEY'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    zkSync_web3 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSyncBuilder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("build"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ZKSYNC_NETWORK_URL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    chain_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("chain_id\n    signer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" PrivateKeyEthSigner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" chain_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    counter_contract_bin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" read_binary"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"PATH_TO_BINARY_COMPILED_CONTRACT"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    nonce "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_transaction_count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" EthBlockParams"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PENDING"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    nonce_holder "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" NonceHolder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    deployment_nonce "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" nonce_holder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_deployment_nonce"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    deployer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ContractDeployer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    precomputed_address "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" deployer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("compute_l2_create_address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deployment_nonce"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"precomputed address: ')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("precomputed_address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    tx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" create_contract_transaction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("web3"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                     from_"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                     ergs_limit"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                     ergs_price"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                     bytecode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("counter_contract_bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    estimate_gas "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eth_estimate_gas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    gas_price "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gas_price\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"Fee for transaction is: ')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("estimate_gas "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" gas_price"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    tx_712 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Transaction712"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("chain_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("chain_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            nonce"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("nonce"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            gas_limit"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("estimate_gas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            to"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"to"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            maxPriorityFeePerGas"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100000000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            maxFeePerGas"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("gas_price"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            from_"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            meta"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eip712Meta"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    singed_message "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" signer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sign_typed_data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tx_712"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("to_eip712_struct"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    msg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tx_712"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("encode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("singed_message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    tx_hash "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("send_raw_transaction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    tx_receipt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("wait_for_transaction_receipt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tx_hash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" timeout"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("240")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" poll_latency"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"tx status: ')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("tx_receipt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'status'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    contract_address "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tx_receipt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"contractAddress"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"contract address: ')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("contract_address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    counter_contract_encoder "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" CounterContractEncoder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"PATH_TO_BINARY_COMPILED_CONTRACT"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                                      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"PATH_TO_CONTRACT_ABI"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    call_data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" counter_contract_encoder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("encode_method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"get"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    eth_tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" TxParams "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"from"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"to"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" contract_address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" call_data\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Value is type dependent so might need to be converted to corresponded type under Python")]),t._v("\n    eth_ret "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("call"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eth_tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ZkBlockParams"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("COMMITTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    converted_result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("from_bytes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eth_ret"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"big"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" signed"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"Call method for deployed contract, address: ')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("contract_address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(", value: ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("converted_result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" __name__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"__main__"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    deploy_contract_create"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"使用-create2-部署智能合约"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-create2-部署智能合约"}},[t._v("#")]),t._v(" 使用 Create2 部署智能合约")]),t._v(" "),a("p",[t._v("使用 "),a("a",{attrs:{href:"https://eips.ethereum.org/EIPS/eip-1014",target:"_blank",rel:"noopener noreferrer"}},[t._v("CREATE2"),a("OutboundLink")],1),t._v(" 操作码使您能够预测将部署合约的地址，而无需这样做，从而改善用户引导。")]),t._v(" "),a("p",[t._v("与上面的 "),a("code",[t._v("create")]),t._v(" 方法类似，这里是如何使用 zkSync 上的 "),a("code",[t._v("create2")]),t._v(" 方法部署合约的实现。")]),t._v(" "),a("div",{staticClass:"language-py extra-class"},[a("pre",{pre:!0,attrs:{class:"language-py"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" os\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" json\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" pathlib "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Path\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" eth_typing "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" HexStr\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" web3 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Web3\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("types "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" TxParams\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request_types "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" create2_contract_transaction\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("manage_contracts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("contract_deployer "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ContractDeployer\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("module_builder "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" zkSyncBuilder\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("core"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("types "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ZkBlockParams"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" EthBlockParams\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" eth_account "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Account\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" eth_account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("local "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" LocalAccount\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("signer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eth_signer "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" PrivateKeyEthSigner\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" zkSync2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("transaction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("transaction712 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Transaction712\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Generate random salt(an arbitrary value provided by the sender)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("generate_random_salt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" os"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("urandom"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Open the file")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("read_binary")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bytes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'rb'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" contact_file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" contact_file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("read"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" data\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Get the contract ABI")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get_abi")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" p"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'r'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" json_f"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" json"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("load"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("json_f"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CounterContractEncoder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("__init__")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bin_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" abi_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("web3 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" web3\n        self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("counter_contract "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eth"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("contract"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("abi"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("get_abi"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("abi_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                                       bytecode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("read_binary"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("bin_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("encode_method")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fn_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("list")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" HexStr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("counter_contract"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("encodeABI"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Deploy the contract")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("deploy_contract_create2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    ZKSYNC_NETWORK_URL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://zkSync2-testnet.zkSync.dev'")]),t._v("\n    account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" LocalAccount "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("from_key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'YOUR_PRIVATE_KEY'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    zkSync_web3 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSyncBuilder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("build"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ZKSYNC_NETWORK_URL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    chain_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("chain_id\n    signer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" PrivateKeyEthSigner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" chain_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    counter_contract_bin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" read_binary"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"PATH_TO_BINARY_COMPILED_CONTRACT"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    nonce "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_transaction_count"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" EthBlockParams"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("PENDING"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    deployer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ContractDeployer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    random_salt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" generate_random_salt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    precomputed_address "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" deployer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("compute_l2_create2_address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sender"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                                              bytecode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("counter_contract_bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                                              constructor"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("b''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                                              salt"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("random_salt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"precomputed address: ')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("precomputed_address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    tx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" create2_contract_transaction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("web3"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                      from_"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                      ergs_price"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                      ergs_limit"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                      bytecode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("counter_contract_bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                                      salt"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("random_salt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    estimate_gas "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("eth_estimate_gas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    gas_price "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gas_price\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"Fee for transaction is: ')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("estimate_gas "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" gas_price"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    tx_712 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Transaction712"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("chain_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("chain_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            nonce"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("nonce"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            gas_limit"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("estimate_gas"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            to"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"to"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            data"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            maxPriorityFeePerGas"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100000000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            maxFeePerGas"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("gas_price"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            from_"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            meta"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eip712Meta"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    singed_message "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" signer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sign_typed_data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tx_712"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("to_eip712_struct"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    msg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tx_712"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("encode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("singed_message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    tx_hash "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("send_raw_transaction"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    tx_receipt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("wait_for_transaction_receipt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tx_hash"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" timeout"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("240")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" poll_latency"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"tx status: ')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("tx_receipt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'status'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    contract_address "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" tx_receipt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"contractAddress"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"contract address: ')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("contract_address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    counter_contract_encoder "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" CounterContractEncoder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CONTRACT_BIN_PATH"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CONTRACT_ABI_PATH"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    call_data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" counter_contract_encoder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("encode_method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"get"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    eth_tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" TxParams "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"from"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" account"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"to"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" contract_address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" call_data\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    eth_ret "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" zkSync_web3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zkSync"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("call"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eth_tx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ZkBlockParams"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("COMMITTED"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("from_bytes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eth_ret"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"big"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" signed"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('f"Call method for deployed contract, address: ')]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("contract_address"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(", value: ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" __name__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"__main__"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    deploy_contract_create2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("::: 注意")]),t._v(" "),a("p",[t._v("⚠️ 这一部分文档仍在更新中，不久将会更新更详细的信息。")]),t._v(" "),a("p",[t._v(":::")])])}),[],!1,null,null,null);s.default=r.exports}}]);